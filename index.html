<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FLC Publishing House | Freedom Life Church</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="FLC Publishing House – curated sermon notes, Bible study guides, and resources from Freedom Life Church."
  />

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            flcNavy: "#1A3A52",
            flcGold: "#9A7B4F",
            flcCharcoal: "#2C2C2C",
            flcCream: "#F5F1E8",
            flcOffWhite: "#FAFAF8",
            flcBorder: "#E8E6E1",
            // Sophisticated muted additions
            flcNavyLight: "#2A4A62",
            flcNavyDark: "#0F2838",
            flcGoldLight: "#B8956A",
            flcGoldDark: "#7A6240",
            flcAccent: "#8B7965",
          },
          fontFamily: {
            heading: ["'Playfair Display'", "Georgia", "serif"],
            body: ["Inter", "-apple-system", "BlinkMacSystemFont", "system-ui", "sans-serif"],
          },
          letterSpacing: {
            widePlus: "0.18em",
            tighter: "-0.02em",
          },
          animation: {
            'fade-in': 'fadeIn 0.6s ease-out',
            'slide-up': 'slideUp 0.5s ease-out',
            'scale-in': 'scaleIn 0.4s ease-out',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            },
            scaleIn: {
              '0%': { transform: 'scale(0.95)', opacity: '0' },
              '100%': { transform: 'scale(1)', opacity: '1' },
            },
          },
          boxShadow: {
            'soft': '0 2px 4px rgba(0, 0, 0, 0.04), 0 4px 8px rgba(0, 0, 0, 0.06)',
            'medium': '0 4px 12px rgba(0, 42, 92, 0.08), 0 2px 4px rgba(0, 42, 92, 0.04)',
            'hard': '0 8px 24px rgba(0, 42, 92, 0.12), 0 4px 8px rgba(0, 42, 92, 0.06)',
            'lift': '0 12px 32px rgba(0, 42, 92, 0.15), 0 6px 12px rgba(0, 42, 92, 0.08)',
            'inner-glow': 'inset 0 0 0 1px rgba(198, 146, 20, 0.1), 0 1px 2px rgba(0, 0, 0, 0.05)',
          },
        },
      },
    };
  </script>

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Inter:wght@300;400;500;600&display=swap"
    rel="stylesheet"
  />
  
  <style>
    /* Premium Typography */
    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      overflow-x: hidden;
    }
    
    html {
      overflow-x: hidden;
      max-width: 100vw;
    }
    
    /* Smooth Scroll */
    html {
      scroll-behavior: smooth;
    }
    
    /* Subtle Fade-in on Load */
    .fade-in-section {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    
    .fade-in-section.is-visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Card Hover Effects */
    .card-hover {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card-hover:hover {
      transform: scale(1.02);
      box-shadow: 0 12px 32px rgba(26, 58, 82, 0.15), 0 6px 12px rgba(26, 58, 82, 0.08);
    }
    
    /* Layered Elevation System */
    .elevation-1 {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
    }
    
    .elevation-2 {
      box-shadow: 0 4px 12px rgba(0, 42, 92, 0.08), 0 2px 4px rgba(0, 42, 92, 0.04);
    }
    
    .elevation-3 {
      box-shadow: 0 8px 24px rgba(0, 42, 92, 0.12), 0 4px 8px rgba(0, 42, 92, 0.06);
    }
    
    /* Layered Border Effect */
    .border-layered {
      border: 1px solid rgba(229, 231, 235, 0.5);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.8), 0 1px 2px rgba(0, 0, 0, 0.05);
    }
    
    /* Sophisticated Color Treatments */
    .gradient-text {
      background: linear-gradient(135deg, #1A3A52 0%, #2A4A62 50%, #9A7B4F 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .gradient-text-gold {
      background: linear-gradient(135deg, #B8956A 0%, #9A7B4F 50%, #7A6240 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .accent-bar {
      position: relative;
      padding-left: 1rem;
    }
    
    .accent-bar::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(to bottom, #9A7B4F, #B8956A);
      border-radius: 2px;
    }
    
    /* Premium Link Underline */
    .link-underline {
      position: relative;
      text-decoration: none;
    }
    
    .link-underline::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 1px;
      background: currentColor;
      transition: width 0.3s ease;
    }
    
    .link-underline:hover::after {
      width: 100%;
    }
    
    /* Staggered Animation */
    .stagger-item {
      animation: slideUp 0.5s ease-out backwards;
    }
    
    .stagger-item:nth-child(1) { animation-delay: 0.1s; }
    .stagger-item:nth-child(2) { animation-delay: 0.2s; }
    .stagger-item:nth-child(3) { animation-delay: 0.3s; }
    .stagger-item:nth-child(4) { animation-delay: 0.4s; }
    .stagger-item:nth-child(5) { animation-delay: 0.5s; }
    .stagger-item:nth-child(6) { animation-delay: 0.6s; }
    
    /* Button Hover Effect */
    .btn-premium {
      transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
      position: relative;
      will-change: transform;
    }
    
    .btn-premium:active {
      transform: scale(0.98);
    }
    
    /* Micro-interactions */
    .ripple {
      position: relative;
      overflow: hidden;
    }
    
    .ripple:active {
      transform: scale(0.98);
      transition: transform 0.1s ease;
    }
    
    .scale-hover {
      transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    .scale-hover:hover {
      transform: scale(1.02);
    }
    
    .glow-on-hover {
      transition: all 0.3s ease;
    }
    
    .glow-on-hover:hover {
      box-shadow: 0 0 20px rgba(154, 123, 79, 0.2), 0 0 40px rgba(154, 123, 79, 0.1);
    }
    
    /* Search & Filter UI */
    .search-bar {
      transition: all 0.3s ease;
    }
    
    .search-bar:focus-within {
      box-shadow: 0 0 0 3px rgba(0, 42, 92, 0.1), 0 4px 12px rgba(0, 42, 92, 0.15);
      transform: translateY(-2px);
    }
    
    .filter-btn {
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .filter-btn:hover {
      transform: scale(1.02);
    }
    
    .filter-btn.active {
      background: linear-gradient(135deg, #002A5C, #003875);
      color: white;
      box-shadow: 0 4px 12px rgba(0, 42, 92, 0.3);
    }
    
    .resource-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .resource-card.hidden {
      opacity: 0;
      transform: scale(0.9);
      height: 0;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    
    /* Pulse animation for new items */
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 0 0 rgba(154, 123, 79, 0.2); }
      50% { box-shadow: 0 0 0 8px rgba(154, 123, 79, 0); }
    }
    
    /* Gradient animation for text */
    @keyframes gradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .animate-gradient {
      background-size: 200% auto;
      animation: gradient 6s linear infinite;
    }
    
    .pulse-new {
      animation: pulse-glow 2s ease-in-out infinite;
    }
    
    /* Skeleton Loading States */
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 1.5s ease-in-out infinite;
      border-radius: 4px;
    }
    
    @keyframes skeleton-loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    /* Toast Notifications */
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: white;
      border-left: 4px solid #9A7B4F;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      transform: translateX(400px);
      opacity: 0;
      transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index: 1000;
      max-width: 350px;
    }
    
    .toast.show {
      transform: translateX(0);
      opacity: 1;
    }
    
    .toast.success { border-left-color: #22c55e; }
    .toast.error { border-left-color: #ef4444; }
    .toast.info { border-left-color: #1A3A52; }
    
    /* Reading Progress Bar */
    .reading-progress {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      background: linear-gradient(to right, #1A3A52, #9A7B4F);
      z-index: 9999;
      transition: width 0.1s ease-out;
    }
    
    /* Scroll to Top Button */
    .scroll-top-btn {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #1A3A52, #2A4A62);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transform: scale(0.8);
      transition: all 0.3s ease;
      z-index: 999;
      box-shadow: 0 4px 12px rgba(26, 58, 82, 0.3);
    }
    
    .scroll-top-btn.visible {
      opacity: 1;
      visibility: visible;
      transform: scale(1);
    }
    
    .scroll-top-btn:hover {
      background: linear-gradient(135deg, #2A4A62, #1A3A52);
      box-shadow: 0 6px 20px rgba(26, 58, 82, 0.4);
      transform: scale(1.1);
    }
    
    /* View count animation */
    @keyframes count-up {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .count-animate {
      animation: count-up 0.5s ease-out;
    }
    
    /* Enhanced Hero Styles */
    .hero-background {
      background: linear-gradient(135deg, #0F2838 0%, #1A3A52 35%, #2A4A62 65%, #1A3A52 100%);
    }
    
    .hero-particles {
      position: absolute;
      inset: 0;
      overflow: hidden;
      opacity: 0.15;
    }
    
    .particle {
      position: absolute;
      background: radial-gradient(circle, rgba(154, 123, 79, 0.8), transparent);
      border-radius: 50%;
      animation: float 20s infinite ease-in-out;
    }
    
    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(30px, -30px) scale(1.1); }
      66% { transform: translate(-20px, 20px) scale(0.9); }
    }
    
    .hero-glow {
      position: absolute;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(154, 123, 79, 0.15), transparent 70%);
      filter: blur(60px);
      animation: pulse-hero 8s infinite ease-in-out;
    }
    
    @keyframes pulse-hero {
      0%, 100% { transform: scale(1); opacity: 0.15; }
      50% { transform: scale(1.2); opacity: 0.25; }
    }
    
    .hero-title {
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    
    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 24px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      animation: badge-glow 3s infinite ease-in-out;
    }
    
    @keyframes badge-glow {
      0%, 100% { box-shadow: 0 0 0 0 rgba(154, 123, 79, 0.4); }
      50% { box-shadow: 0 0 20px 4px rgba(154, 123, 79, 0.2); }
    }
    
    .stats-card {
      backdrop-filter: blur(20px);
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.12);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .stats-card:hover {
      background: rgba(255, 255, 255, 0.12);
      border-color: rgba(154, 123, 79, 0.4);
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
    }
    
    .hero-cta-group {
      animation: slideUp 0.8s ease-out 0.3s backwards;
    }
    
    /* Prevent horizontal overflow */
    .max-w-7xl {
      max-width: min(80rem, 100vw);
    }
    
    section, article, div {
      max-width: 100%;
    }
    
    @keyframes gradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .animate-gradient {
      background-size: 200% auto;
      animation: gradient 6s linear infinite;
    }
    
    /* Mobile Responsive Enhancements */
    @media (max-width: 1023px) {
      .hero-background {
        min-h: auto;
        padding-top: 3rem;
        padding-bottom: 3rem;
        overflow-x: hidden;
      }
      
      .max-w-7xl {
        max-width: 100%;
        padding-left: 1.5rem;
        padding-right: 1.5rem;
      }
      
      .hero-title {
        font-size: 2.5rem;
        line-height: 1.1;
      }
      
      .hero-badge {
        font-size: 10px;
        padding: 0.4rem 0.8rem;
      }
      
      .hero-cta-group a,
      .hero-cta-group button {
        width: 100%;
        justify-content: center;
        padding-top: 1rem;
        padding-bottom: 1rem;
      }
      
      .audio-player {
        padding: 0.75rem;
      }
      
      .play-btn {
        width: 36px;
        height: 36px;
      }
      
      .time-display {
        font-size: 11px;
        min-width: 70px;
      }
    }
    
    @media (max-width: 640px) {
      .hero-background {
        padding-top: 2rem;
        padding-bottom: 2rem;
      }
      
      .hero-title {
        font-size: 1.875rem;
        line-height: 1.15;
        word-break: break-word;
        margin-bottom: 0.5rem;
      }
      
      .hero-particles {
        display: none;
      }
      
      body, html {
        max-width: 100vw;
        overflow-x: hidden;
      }
      
      .hero-badge {
        max-width: 90vw;
        font-size: 9px;
        padding: 0.375rem 0.75rem;
      }
      
      .hero-badge svg {
        width: 14px;
        height: 14px;
      }
      
      .hero-cta-group {
        width: 100%;
        gap: 0.75rem;
      }
      
      .hero-cta-group svg {
        width: 18px;
        height: 18px;
      }
      
      .quick-jump-fab {
        bottom: 1.5rem;
        left: 0.75rem;
        right: auto;
        padding: 0.5rem 0.875rem;
        font-size: 11px;
        white-space: nowrap;
        width: 48px;
        height: 48px;
      }
      
      .quick-jump-fab svg {
        width: 16px;
        height: 16px;
      }
      
      .quick-jump-fab span {
        display: none;
      }
      
      .scroll-top-btn {
        bottom: 1.5rem;
        right: 0.75rem;
        width: 48px;
        height: 48px;
      }
      
      .toast {
        bottom: 1rem;
        right: 1rem;
        left: 1rem;
        max-width: none;
      }
      
      .modal-content {
        padding: 1.5rem;
      }
      
      .bookmark-btn {
        width: 32px;
        height: 32px;
      }
      
      .bookmark-btn svg {
        width: 16px;
        height: 16px;
      }
    }
    
    /* Favorites/Bookmark System */
    .bookmark-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 36px;
      height: 36px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.2s ease;
      z-index: 10;
    }
    
    .bookmark-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .bookmark-btn.bookmarked {
      background: linear-gradient(135deg, #9A7B4F, #B8956A);
      color: white;
    }
    
    .bookmark-btn svg {
      width: 18px;
      height: 18px;
      transition: all 0.2s ease;
    }
    
    .bookmark-btn.bookmarked svg {
      fill: currentColor;
    }
    
    /* Audio Player */
    .audio-player {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      margin-top: 1rem;
    }
    
    .audio-controls {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .play-btn {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #1A3A52, #2A4A62);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      cursor: pointer;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }
    
    .play-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(26, 58, 82, 0.3);
    }
    
    .progress-bar {
      flex: 1;
      height: 6px;
      background: #E8E6E1;
      border-radius: 3px;
      position: relative;
      cursor: pointer;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(to right, #1A3A52, #9A7B4F);
      border-radius: 3px;
      transition: width 0.1s linear;
    }
    
    .time-display {
      font-size: 12px;
      color: #666;
      font-family: monospace;
      min-width: 80px;
      text-align: right;
    }
    
    /* Progress Tracking */
    .progress-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.25rem 0.75rem;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: white;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .progress-badge.in-progress {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
    }
    
    .progress-ring {
      transform: rotate(-90deg);
    }
    
    .progress-ring-circle {
      transition: stroke-dashoffset 0.3s ease;
    }
    
    /* Quick Jump FAB */
    .quick-jump-fab {
      position: fixed;
      bottom: 5rem;
      right: 2rem;
      background: linear-gradient(135deg, #9A7B4F, #B8956A);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 28px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(154, 123, 79, 0.4);
      transition: all 0.3s ease;
      z-index: 998;
      font-size: 14px;
      font-weight: 600;
      opacity: 0;
      visibility: hidden;
      transform: scale(0.9);
      white-space: nowrap;
    }
    
    @media (max-width: 640px) {
      .quick-jump-fab {
        width: 48px;
        height: 48px;
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        gap: 0;
        bottom: 1.5rem;
        left: 0.75rem;
      }
    }
    
    .quick-jump-fab.visible {
      opacity: 1;
      visibility: visible;
      transform: scale(1);
    }
    
    .quick-jump-fab:hover {
      background: linear-gradient(135deg, #B8956A, #9A7B4F);
      box-shadow: 0 6px 20px rgba(154, 123, 79, 0.5);
      transform: translateY(-2px) scale(1.05);
    }
    
    /* Subscription Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.show {
      opacity: 1;
      visibility: visible;
    }
    
    .modal-content {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    
    .modal-overlay.show .modal-content {
      transform: scale(1);
    }
    
    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #f1f1f1;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .modal-close:hover {
      background: #e1e1e1;
      transform: scale(1.1);
    }
    
    /* Form Styling */
    .form-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid #E8E6E1;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.2s ease;
    }
    
    .form-input:focus {
      outline: none;
      border-color: #1A3A52;
      box-shadow: 0 0 0 3px rgba(26, 58, 82, 0.1);
    }
    
    .checkbox-label {
      display: flex;
      align-items: start;
      gap: 0.5rem;
      cursor: pointer;
      font-size: 13px;
      color: #666;
    }
    
    .checkbox-label input[type="checkbox"] {
      margin-top: 2px;
      cursor: pointer;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-flcOffWhite via-flcOffWhite to-flcCream/30 text-flcCharcoal font-body antialiased">
  <!-- Reading Progress Bar -->
  <div class="reading-progress" id="readingProgress" style="width: 0%;"></div>
  
  <!-- Quick Jump to Latest FAB -->
  <button class="quick-jump-fab visible" id="quickJumpFab">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
    </svg>
    <span>Latest Sermon</span>
  </button>
  
  <!-- Scroll to Top Button -->
  <button class="scroll-top-btn" id="scrollTopBtn" aria-label="Scroll to top">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
    </svg>
  </button>
  
  <!-- Toast Container -->
  <div id="toastContainer"></div>
  
  <!-- Subscription Modal -->
  <div class="modal-overlay" id="subscriptionModal">
    <div class="modal-content">
      <button class="modal-close" id="modalClose" aria-label="Close modal">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      
      <div class="text-center mb-6">
        <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-flcNavy/10 to-flcGold/10 rounded-full mb-4">
          <svg class="w-8 h-8 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
          </svg>
        </div>
        <h3 class="text-2xl font-heading font-bold text-flcNavy mb-2">Never Miss a Sermon</h3>
        <p class="text-flcCharcoal/70">Get notified when new sermon notes and Bible studies are published</p>
      </div>
      
      <form id="subscriptionForm" class="space-y-4">
        <div>
          <label for="subName" class="block text-sm font-medium text-flcCharcoal mb-2">Full Name</label>
          <input type="text" id="subName" name="name" required class="form-input" placeholder="John Doe">
        </div>
        
        <div>
          <label for="subEmail" class="block text-sm font-medium text-flcCharcoal mb-2">Email Address</label>
          <input type="email" id="subEmail" name="email" required class="form-input" placeholder="john@example.com">
        </div>
        
        <div class="space-y-2">
          <p class="text-sm font-medium text-flcCharcoal mb-2">Notification Preferences</p>
          <label class="checkbox-label">
            <input type="checkbox" name="newSermon" checked>
            <span>New sermon notes published</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="weeklyDigest" checked>
            <span>Weekly digest of resources</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="studyGuides">
            <span>New Bible study guides</span>
          </label>
        </div>
        
        <button type="submit" class="w-full btn-premium ripple px-6 py-3 rounded-full bg-gradient-to-r from-flcNavy to-flcNavyLight text-white font-semibold tracking-widePlus uppercase text-sm hover:from-flcNavyLight hover:to-flcNavy shadow-md hover:shadow-lg">
          Subscribe Now
        </button>
        
        <p class="text-xs text-center text-flcCharcoal/50 mt-4">
          We respect your privacy. Unsubscribe anytime.
        </p>
      </form>
    </div>
  </div>
  
  <main class="min-h-screen">
    <!-- Hero Header - Enhanced Premium Design -->
    <section class="hero-background relative text-white min-h-[90vh] flex items-center">
      <!-- Animated Background Elements -->
      <div class="hero-particles">
        <div class="particle" style="top: 10%; left: 10%; width: 4px; height: 4px; animation-delay: 0s;"></div>
        <div class="particle" style="top: 20%; left: 80%; width: 3px; height: 3px; animation-delay: 2s;"></div>
        <div class="particle" style="top: 70%; left: 20%; width: 5px; height: 5px; animation-delay: 4s;"></div>
        <div class="particle" style="top: 40%; left: 90%; width: 4px; height: 4px; animation-delay: 6s;"></div>
        <div class="particle" style="top: 80%; left: 70%; width: 3px; height: 3px; animation-delay: 8s;"></div>
        <div class="particle" style="top: 30%; left: 50%; width: 6px; height: 6px; animation-delay: 10s;"></div>
      </div>
      
      <!-- Hero Glow Effects -->
      <div class="hero-glow hidden sm:block" style="top: -200px; right: -100px;"></div>
      <div class="hero-glow hidden sm:block" style="bottom: -300px; left: -150px; animation-delay: 4s;"></div>
      
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 lg:py-24 relative z-10 w-full">
        <div class="grid lg:grid-cols-[1.1fr_0.9fr] gap-8 sm:gap-12 lg:gap-20 items-center">
          <div class="fade-in-section is-visible space-y-8">
            <!-- Premium Badge -->
            <div class="hero-badge">
              <svg class="w-5 h-5 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
              </svg>
              <span class="text-flcGold/90">FLC Publishing House</span>
            </div>
            
            <!-- Enhanced Title -->
            <h1 class="hero-title text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-heading font-bold leading-[0.9] tracking-tighter max-w-full overflow-hidden">
              <span class="block text-white/95 mb-2">Sermon Notes,</span>
              <span class="block text-transparent bg-clip-text bg-gradient-to-r from-flcGold via-flcGoldLight to-flcGold animate-gradient mb-2">Bible Studies</span>
              <span class="block text-white/90">&amp; Resources</span>
            </h1>
            <!-- Enhanced Description -->
            <div class="space-y-3 sm:space-y-4 lg:space-y-6">
              <p class="text-base sm:text-lg md:text-xl lg:text-2xl text-white/90 leading-relaxed font-light max-w-2xl">
                A curated home for teaching from Freedom Life Church
              </p>
              <p class="text-sm sm:text-base lg:text-lg text-white/70 leading-relaxed max-w-xl">
                Crafted notes, study guides, and resources designed to help you sit with the Word, not just listen to it once on Sunday.
              </p>
            </div>
            
            <!-- Enhanced CTA Buttons -->
            <div class="hero-cta-group flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4">
              <a href="#sermon-notes" class="btn-premium inline-flex items-center justify-center px-8 sm:px-10 py-4 sm:py-5 rounded-full bg-gradient-to-r from-flcGold to-flcGoldLight text-flcNavyDark font-bold tracking-wide sm:tracking-widePlus uppercase text-sm hover:from-flcGoldLight hover:to-flcGold shadow-2xl hover:shadow-flcGold/50 transform hover:-translate-y-1 hover:scale-105 transition-all">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                Explore Library
              </a>
              <button id="heroSubscribeBtn" class="btn-premium inline-flex items-center justify-center px-6 sm:px-8 py-4 sm:py-5 rounded-full border-2 border-white/30 bg-white/5 text-white font-semibold text-sm tracking-wide uppercase hover:bg-white/15 hover:border-white/50 backdrop-blur-md shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                </svg>
                Get Notifications
              </button>
              <a href="https://freedomlifechurch.ca/" class="btn-premium inline-flex items-center justify-center px-6 py-3 sm:py-3.5 rounded-full border border-white/20 text-white/80 font-medium text-sm hover:text-white hover:bg-white/5 hover:border-white/30 backdrop-blur-sm transition-all">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Back to Church
              </a>
            </div>
          </div>
          <div class="flex flex-col gap-4 sm:gap-6 fade-in-section is-visible lg:mt-0 mt-8 sm:mt-12" style="animation-delay: 0.2s;">
            <!-- Featured Sermon Card -->
            <div class="stats-card rounded-2xl p-5 sm:p-6 relative overflow-hidden group">
              <div class="absolute top-0 right-0 w-32 h-32 bg-flcGold/10 rounded-full blur-2xl -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-700"></div>
              <div class="relative z-10">
                <div class="flex items-center gap-2 mb-4">
                  <span class="w-2 h-2 bg-flcGold rounded-full animate-pulse"></span>
                  <p class="text-[11px] uppercase tracking-wider text-flcGold font-bold">Latest Release</p>
                </div>
                <h3 class="text-2xl font-heading font-bold mb-3 leading-tight">When Compassion Costs You Sleep</h3>
                <p class="text-sm text-white/70 leading-relaxed">Complete sermon series with notes & study guides</p>
                <div class="mt-4 flex items-center gap-2 text-xs text-flcGold/80">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                  </svg>
                  <span>35 minutes</span>
                </div>
              </div>
            </div>
            
            <!-- Stats Grid -->
            <div class="grid grid-cols-2 gap-3 sm:gap-4">
              <div class="stats-card rounded-2xl p-4 sm:p-6 text-center group">
                <div class="inline-flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-flcGold/20 mb-2 sm:mb-3 group-hover:scale-110 transition-transform">
                  <svg class="w-5 h-5 sm:w-6 sm:h-6 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                  </svg>
                </div>
                <p class="text-3xl sm:text-4xl font-heading font-bold text-white mb-1">1</p>
                <p class="text-[10px] sm:text-xs text-white/60 uppercase tracking-wider">Sermon Note</p>
              </div>
              <div class="stats-card rounded-2xl p-4 sm:p-6 text-center group">
                <div class="inline-flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-white/10 mb-2 sm:mb-3 group-hover:scale-110 transition-transform">
                  <svg class="w-5 h-5 sm:w-6 sm:h-6 text-white/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                  </svg>
                </div>
                <p class="text-3xl sm:text-4xl font-heading font-bold text-white mb-1">1</p>
                <p class="text-[10px] sm:text-xs text-white/60 uppercase tracking-wider">Study Guide</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content Container -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24 relative z-20">

      <!-- Search & Filter Bar -->
      <div class="mb-12 fade-in-section is-visible relative z-30 bg-flcOffWhite rounded-2xl mx-0 sm:-mx-4 px-4 py-6 sm:py-8 sm:px-6 shadow-sm">
        <div class="max-w-4xl mx-auto">
          <!-- Search Input -->
          <div class="relative mb-6">
            <div class="search-bar relative">
              <input
                type="text"
                id="resourceSearch"
                placeholder="Search sermons and studies..."
                class="w-full px-4 sm:px-6 py-3 sm:py-4 pl-12 sm:pl-14 rounded-2xl border-2 border-flcBorder bg-white focus:outline-none focus:border-flcNavy/40 text-sm sm:text-base text-flcCharcoal placeholder:text-flcCharcoal/50 font-light shadow-sm"
              />
              <svg class="absolute left-5 top-1/2 -translate-y-1/2 w-5 h-5 text-flcCharcoal/40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
              <button
                id="clearSearch"
                class="absolute right-5 top-1/2 -translate-y-1/2 text-flcCharcoal/40 hover:text-flcNavy transition-colors hidden"
                aria-label="Clear search"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
          </div>
          
          <!-- Filter Buttons -->
          <div class="flex flex-wrap gap-2 sm:gap-3 justify-center">
            <button class="filter-btn active px-4 sm:px-5 py-2 sm:py-2.5 rounded-full border-2 border-flcNavy bg-flcNavy text-white font-medium text-xs sm:text-sm ripple shadow-sm" data-filter="all">
              All Resources
            </button>
            <button class="filter-btn px-4 sm:px-5 py-2 sm:py-2.5 rounded-full border-2 border-flcNavy/30 bg-white text-flcNavy font-medium text-xs sm:text-sm ripple hover:bg-flcNavy/5 shadow-sm" data-filter="sermon">
              Sermon Notes
            </button>
            <button class="filter-btn px-4 sm:px-5 py-2 sm:py-2.5 rounded-full border-2 border-flcNavy/30 bg-white text-flcNavy font-medium text-xs sm:text-sm ripple hover:bg-flcNavy/5 shadow-sm" data-filter="study">
              Bible Studies
            </button>
            <button class="filter-btn px-4 sm:px-5 py-2 sm:py-2.5 rounded-full border-2 border-flcNavy/30 bg-white text-flcNavy font-medium text-xs sm:text-sm ripple hover:bg-flcNavy/5 shadow-sm" data-filter="series">
              Series
            </button>
          </div>
          
          <!-- Results Counter -->
          <div class="mt-6 text-center">
            <p id="resultsCounter" class="text-sm text-flcCharcoal/60 font-light">
              <span id="resultCount" class="font-semibold text-flcNavy">12</span> resources found
            </p>
          </div>
        </div>
      </div>

      <!-- Bento Box Layout -->
      <section class="mb-20 lg:mb-28 relative z-20">
        <div class="grid gap-6 lg:grid-cols-12 lg:grid-rows-[auto_auto] auto-rows-fr">
          <!-- Featured Collection - Large Span -->
          <article class="resource-card lg:col-span-8 lg:row-span-2 bg-white border-layered rounded-2xl sm:rounded-3xl p-6 sm:p-8 lg:p-12 flex flex-col justify-between card-hover fade-in-section is-visible elevation-3 relative overflow-hidden group glow-on-hover" data-type="series sermon" data-tags="compassion pastor-rohan matthew" data-resource-id="sermon-1" style="max-width: 100%;">
          <button class="bookmark-btn" data-resource-id="sermon-1" aria-label="Bookmark this resource">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
            </svg>
          </button>
          <div class="absolute top-0 right-0 w-48 sm:w-72 h-48 sm:h-72 bg-gradient-to-br from-flcGold/[0.06] to-transparent rounded-full blur-3xl -mr-24 sm:-mr-36 -mt-24 sm:-mt-36 group-hover:scale-110 transition-transform duration-700"></div>
          <div class="absolute -bottom-10 -left-10 w-40 h-40 bg-flcNavy/[0.03] rounded-full blur-2xl"></div>
          <div class="relative z-10">
            <div class="inline-flex items-center gap-2 mb-6">
              <span class="w-1 h-8 bg-gradient-to-b from-flcGold/80 to-flcGoldDark/70 rounded-full"></span>
              <p class="text-[10px] tracking-[0.2em] uppercase font-semibold gradient-text-gold">
                Featured Collection
              </p>
            </div>
            <h2 class="text-4xl sm:text-5xl lg:text-6xl font-heading font-bold text-flcNavy/95 leading-[1.05] tracking-tighter mb-6">
              When Compassion<br class="hidden sm:block"> Costs You Sleep
            </h2>
            <div class="w-16 h-1 bg-gradient-to-r from-flcGold/70 to-transparent rounded-full mb-6"></div>
            <p class="text-lg sm:text-xl text-flcCharcoal/70 leading-relaxed font-light max-w-2xl">
              A series by Pastor Rohan Samuels exploring what it means to carry the
              burdens of others with Jesus—when compassion stretches your comfort,
              your schedule, and your sleep.
            </p>
            <dl class="mt-8 space-y-5 text-sm text-flcCharcoal/60">
              <div class="flex gap-4">
                <dt class="w-24 uppercase tracking-widePlus text-[11px] font-semibold text-flcCharcoal/50">Format</dt>
                <dd class="flex-1 font-light">Full sermon notes, key quotes, and reflection questions.</dd>
              </div>
              <div class="flex gap-4">
                <dt class="w-24 uppercase tracking-widePlus text-[11px] font-semibold text-flcCharcoal/50">Passages</dt>
                <dd class="flex-1 font-light">Matthew 26:36–46 and related texts on compassion and calling.</dd>
              </div>
            </dl>
          </div>
          <!-- Audio Player -->
          <div class="audio-player relative z-10">
            <div class="audio-controls">
              <button class="play-btn" id="audioPlayBtn" aria-label="Play audio">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M8 5v14l11-7z"></path>
                </svg>
              </button>
              <div class="progress-bar" id="audioProgressBar">
                <div class="progress-fill" id="audioProgressFill" style="width: 0%;"></div>
              </div>
              <div class="time-display" id="audioTime">0:00 / 0:00</div>
            </div>
            <audio id="audioElement" preload="metadata">
              <source src="assets/audio/when-compassion-costs-you-sleep.mp3" type="audio/mpeg">
              Your browser does not support audio playback.
            </audio>
          </div>
          
          <div class="mt-8 flex flex-wrap gap-3">
            <a href="https://www.youtube.com/watch?v=WQKdVUuCjms&t=6259s" target="_blank" rel="noopener noreferrer" class="btn-premium ripple inline-flex items-center px-6 py-3 rounded-full bg-gradient-to-r from-flcNavy to-flcNavyLight text-white font-medium tracking-widePlus uppercase text-[10px] hover:from-flcNavyLight hover:to-flcNavy shadow-md hover:shadow-lg">
              <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
              </svg>
              Watch Sermon
            </a>
            <a href="assets/pdfs/when-compassion-costs-you-sleep.pdf" download class="btn-premium inline-flex items-center px-6 py-3 rounded-full border-gradient text-flcCharcoal/80 font-medium text-[10px] tracking-widePlus uppercase hover:text-flcNavy transition-colors">
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
              Download PDF
            </a>
          </div>
          </div>
        </article>

        <!-- Latest Releases - Stacked Cards -->
        <div class="lg:col-span-4 lg:row-span-1 flex flex-col gap-6">
          <!-- Quick Stats Card -->
          <aside class="bg-gradient-to-br from-flcNavy/[0.04] to-flcGold/[0.04] border-layered rounded-2xl p-6 fade-in-section is-visible elevation-1" style="animation-delay: 0.2s;">
            <h3 class="text-[10px] font-semibold tracking-[0.2em] uppercase text-flcCharcoal/60 mb-6">
              Library Overview
            </h3>
            <div class="grid grid-cols-2 gap-4">
              <div>
                <p class="text-3xl font-heading font-bold text-flcNavy/90">1</p>
                <p class="text-xs text-flcCharcoal/60 mt-1">Sermon Note</p>
              </div>
              <div>
                <p class="text-3xl font-heading font-bold text-flcGold/90">1</p>
                <p class="text-xs text-flcCharcoal/60 mt-1">Study Guide</p>
              </div>
            </div>
          </aside>

          <!-- Latest Item Card -->
          <aside class="bg-white border-layered rounded-2xl p-6 card-hover elevation-2 fade-in-section is-visible pulse-new" style="animation-delay: 0.3s;">
            <div class="flex items-center justify-between gap-4 mb-5">
              <div class="flex items-center gap-2">
                <span class="w-2 h-2 bg-flcGold rounded-full animate-pulse"></span>
                <h3 class="text-[10px] font-semibold tracking-[0.2em] uppercase text-flcCharcoal/60">
                  Latest Release
                </h3>
              </div>
              <a href="#" class="text-xs font-medium text-flcNavy hover:text-flcGold link-underline">
                View all →
              </a>
            </div>

          <!-- Item 2 -->
          <article class="resource-card border-t border-flcBorder/30 pt-5" data-type="sermon" data-tags="compassion">
            <p class="text-[10px] uppercase tracking-[0.2em] font-semibold mb-3 gradient-text-gold">
              Sermon Notes · Oct 27, 2025
            </p>
            <h4 class="text-base font-heading font-semibold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">
              When Compassion Costs You Sleep
            </h4>
            <p class="text-sm text-flcCharcoal/60 font-light leading-relaxed">
              Structured notes, Scripture callouts, and space for personal application.
            </p>
            <div class="mt-4 flex flex-wrap gap-3 text-xs">
              <a href="#" class="text-flcNavy font-medium hover:text-flcGold link-underline">
                Open notes
              </a>
              <span class="text-flcCharcoal/50">PDF · Discussion questions</span>
            </div>
          </article>

          <!-- Item 2 -->
          <article class="resource-card border-t border-flcBorder pt-4" data-type="sermon" data-tags="unwillingness obedience">
            <p
              class="text-[11px] uppercase tracking-widePlus font-semibold gradient-text-gold"
            >
              Sermon Notes · Oct 27, 2025
            </p>
            <h4 class="mt-2 text-sm sm:text-base font-heading font-semibold text-flcNavy group-hover:text-flcGold transition-colors">
              Anointed in Unwillingness
            </h4>
            <p class="mt-1 text-xs sm:text-sm text-flcCharcoal/80">
              How God meets us in hesitation and still calls us into obedient,
              compassionate service.
            </p>
            <div class="mt-3 flex flex-wrap gap-3 text-xs">
              <a
                href="#"
                class="underline underline-offset-4 decoration-flcNavy/40 hover:decoration-flcNavy"
              >
                Open notes
              </a>
              <span class="text-flcCharcoal/60">Outline · Reflection prompts</span>
            </div>
          </article>

          <!-- Item 3 -->
          <article class="resource-card border-t border-flcBorder pt-4" data-type="study" data-tags="matthew gethsemane prayer">
            <p
              class="text-[11px] uppercase tracking-widePlus font-semibold gradient-text-gold"
            >
              Bible Study Guide
            </p>
            <h4 class="mt-2 text-sm sm:text-base font-heading font-semibold text-flcNavy group-hover:text-flcGold transition-colors">
              Matthew 26:36–46 — Gethsemane
            </h4>
            <p class="mt-1 text-xs sm:text-sm text-flcCharcoal/80">
              A guided study for small groups walking through Jesus' night in the
              garden.
            </p>
            <div class="mt-3 flex flex-wrap gap-3 text-xs">
              <a
                href="#"
                class="underline underline-offset-4 decoration-flcNavy/40 hover:decoration-flcNavy"
              >
                Download PDF
              </a>
              <span class="text-flcCharcoal/60">Group &amp; personal use</span>
            </div>
          </article>
        </aside>
        </div>
      </section>

      <!-- Main Library Sections -->
      <section class="space-y-20 lg:space-y-28 relative z-20">
        <!-- Sermon Notes Library -->
        <section id="sermon-notes" aria-labelledby="sermon-notes-heading" class="fade-in-section relative bg-flcOffWhite/50 backdrop-blur-sm rounded-3xl p-6 sm:p-8 mx-0">
          <div class="absolute -left-4 top-0 w-1 h-32 bg-gradient-to-b from-flcGold via-flcGold/50 to-transparent rounded-full"></div>
          <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6 mb-12">
            <div class="max-w-2xl">
              <p class="text-[10px] tracking-[0.2em] uppercase text-flcGold font-semibold mb-4">Browse Collection</p>
              <h2 id="sermon-notes-heading" class="text-4xl sm:text-5xl lg:text-6xl font-heading font-bold tracking-tighter mb-4 gradient-text">
                Sermon Notes Library
              </h2>
              <p class="text-lg text-flcCharcoal/60 font-light">
                Clean, structured notes to revisit what God spoke on Sunday.
              </p>
            </div>
            <a href="#" class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-flcNavy/5 text-flcNavy font-medium text-sm hover:bg-flcNavy/10 transition-colors">
              Browse all
              <span aria-hidden="true">→</span>
            </a>
          </div>

          <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 auto-rows-auto">
            <!-- Card Template 1 -->
            <article class="resource-card stagger-item bg-white border-layered rounded-xl p-6 flex flex-col justify-between card-hover elevation-2 glow-on-hover scale-hover relative" data-type="sermon series" data-tags="compassion pastor-rohan" data-resource-id="sermon-2">
              <button class="bookmark-btn" data-resource-id="sermon-2" aria-label="Bookmark this resource">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                </svg>
              </button>
              <header>
                <div class="flex items-center justify-between mb-3">
                  <p class="text-[10px] uppercase tracking-[0.2em] font-semibold gradient-text-gold">
                    Series · Compassion
                  </p>
                  <span class="progress-badge" data-progress="completed" style="display: none;">
                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Completed
                  </span>
                </div>
                <h3 class="text-lg font-heading font-bold text-flcNavy leading-tight mb-3 group-hover:text-flcGold transition-colors">
                  When Compassion Costs You Sleep
                </h3>
                <p class="text-sm text-flcCharcoal/60 font-light leading-relaxed">
                  Full manuscript-style notes with Scripture pull-quotes and journaling prompts.
                </p>
              </header>
              <footer class="mt-5 flex items-center justify-between text-xs">
                <div class="flex items-center gap-3">
                  <a href="assets/pdfs/when-compassion-costs-you-sleep.pdf" download class="text-flcCharcoal/50 font-light hover:text-flcNavy transition-colors">PDF · 6 pages</a>
                  <a href="https://www.youtube.com/watch?v=WQKdVUuCjms&t=6259s" target="_blank" rel="noopener noreferrer" class="text-flcCharcoal/50 font-light hover:text-flcNavy transition-colors">Video</a>
                </div>
                <a href="assets/pdfs/when-compassion-costs-you-sleep.pdf" download class="inline-flex items-center text-flcNavy font-medium hover:text-flcGold link-underline">
                  Download
                  <span aria-hidden="true" class="ml-1">→</span>
                </a>
              </footer>
            </article>

            <!-- Card Template 2 -->
            <article class="resource-card stagger-item bg-white border-layered rounded-xl p-6 flex flex-col justify-between card-hover elevation-2 glow-on-hover scale-hover relative" data-type="sermon" data-tags="unwillingness obedience anointing" data-resource-id="sermon-3">
              <button class="bookmark-btn" data-resource-id="sermon-3" aria-label="Bookmark this resource">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                </svg>
              </button>
              <header>
                <p class="text-[10px] uppercase tracking-[0.2em] font-semibold mb-3 gradient-text-gold">
                  Standalone
                </p>
                <h3 class="text-lg font-heading font-bold text-flcNavy leading-tight mb-3 group-hover:text-flcGold transition-colors">
                  Anointed in Unwillingness
                </h3>
                <p class="text-sm text-flcCharcoal/60 font-light leading-relaxed">
                  Key points, application questions, and space for personal commitments.
                </p>
              </header>
              <footer class="mt-5 flex items-center justify-between text-xs">
                <span class="text-flcCharcoal/50 font-light">Outline · PDF</span>
                <a href="#" class="inline-flex items-center text-flcNavy font-medium hover:text-flcGold link-underline">
                  View notes
                  <span aria-hidden="true" class="ml-1">→</span>
                </a>
              </footer>
            </article>

            <!-- Tall Accent Card -->
            <article class="stagger-item lg:row-span-2 bg-gradient-to-br from-flcNavy to-flcNavyDark text-white rounded-2xl p-8 flex flex-col justify-between relative overflow-hidden group elevation-3">
              <div class="absolute top-0 right-0 w-48 h-48 bg-flcGold/20 rounded-full blur-3xl -mr-20 -mt-20 group-hover:scale-125 transition-transform duration-700"></div>
              <div class="relative z-10">
                <p class="text-[10px] tracking-[0.2em] uppercase text-flcGold font-semibold mb-6">
                  New Series
                </p>
                <h3 class="text-2xl font-heading font-bold leading-tight mb-4">
                  More Teaching Coming Soon
                </h3>
                <p class="text-sm text-white/70 font-light leading-relaxed">
                  We're constantly adding new sermon notes and study materials. Check back regularly or subscribe for updates.
                </p>
              </div>
              <a href="#" class="relative z-10 mt-8 inline-flex items-center gap-2 text-sm font-medium text-flcGold hover:text-flcGoldLight transition-colors">
                Get notified
                <span aria-hidden="true">→</span>
              </a>
            </article>

            <!-- Stats Showcase Card -->
            <article class="stagger-item bg-gradient-to-br from-flcGold/10 via-flcGoldLight/5 to-transparent border-2 border-flcGold/20 rounded-2xl p-8 flex flex-col items-center justify-center text-center elevation-2">
              <p class="text-5xl font-heading font-bold text-flcGold mb-2">35</p>
              <p class="text-sm text-flcCharcoal/70 font-light mb-4">Minutes of Teaching</p>
              <p class="text-xs text-flcCharcoal/50">Available for free download</p>
            </article>
          </div>
        </section>

        <!-- Bible Study Guides -->
        <section aria-labelledby="bible-study-heading" class="relative">
          <div class="absolute -left-4 top-0 w-1 h-24 bg-gradient-to-b from-flcNavy via-flcNavy/50 to-transparent rounded-full"></div>
          <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6 mb-10">
            <div class="max-w-2xl">
              <p class="text-[10px] tracking-[0.2em] uppercase text-flcNavy/60 font-semibold mb-4">Go Deeper</p>
              <h2
                id="bible-study-heading"
                class="text-4xl sm:text-5xl font-heading font-bold tracking-tighter mb-4 gradient-text"
              >
                Bible Study Guides
              </h2>
              <p class="text-lg text-flcCharcoal/60 font-light">
                Studies for small groups, families, and personal devotion.
              </p>
            </div>
            <a
              href="#"
              class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-flcNavy/5 text-flcNavy font-medium text-sm hover:bg-flcNavy/10 transition-colors"
            >
              Browse all study guides
              <span aria-hidden="true">→</span>
            </a>
          </div>

          <div class="space-y-4">
            <!-- Guide 1 -->
            <article class="bg-white border-layered rounded-lg px-5 py-4 sm:px-6 sm:py-5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 card-hover elevation-2 relative overflow-hidden">
              <div class="absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-flcNavy/5 to-transparent rounded-full blur-2xl -ml-16 -mb-16"></div>
              <div class="relative z-10 flex-1">
                <h3 class="text-base sm:text-lg font-heading font-semibold text-flcNavy">
                  Matthew 26:36–46 — Gethsemane
                </h3>
                <p class="mt-1 text-sm text-flcCharcoal/80 max-w-xl">
                  A guided study on Jesus in the garden, with structured
                  observation, interpretation, and application questions.
                </p>
              </div>
              <div class="flex flex-wrap gap-3 text-xs sm:text-sm relative z-10">
                <a
                  href="#"
                  class="px-3 py-1.5 rounded-full border border-flcNavy text-flcNavy font-medium tracking-widePlus uppercase text-[11px] hover:bg-flcNavy hover:text-white transition shadow-sm hover:shadow-md"
                >
                  Download PDF
                </a>
                <a
                  href="#"
                  class="px-3 py-1.5 rounded-full border border-flcBorder text-flcCharcoal/80 font-medium text-[11px] tracking-widePlus uppercase hover:border-flcNavy/40 transition"
                >
                  View questions
                </a>
              </div>
            </article>

            <!-- Guide placeholder -->
            <article class="border border-dashed border-flcBorder/70 rounded-lg px-5 py-4 text-xs sm:text-sm text-flcCharcoal/70 bg-gradient-to-r from-flcCream/30 to-transparent elevation-1">
              Add more studies by duplicating this pattern—keep title, short
              description, and clear calls to action for each guide.
            </article>
          </div>
        </section>

        <!-- Additional Resources -->
        <section aria-labelledby="resources-heading" class="border-t border-flcBorder/30 pt-12 fade-in-section">
          <h2 id="resources-heading" class="text-3xl sm:text-4xl font-heading font-bold text-flcNavy tracking-tighter mb-6">
            Additional Resources
          </h2>
          <p class="text-base text-flcCharcoal/60 font-light mb-8">
            Tools and materials to support your spiritual journey.
          </p>
        </section>
      </section>
    </section>
  </main>

  <script>
    // Fade-in animation on scroll
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
        }
      });
    }, observerOptions);

    document.querySelectorAll('.fade-in-section').forEach(el => {
      observer.observe(el);
    });

    // Search and Filter Functionality
    const searchInput = document.getElementById('resourceSearch');
    const clearSearchBtn = document.getElementById('clearSearch');
    const filterBtns = document.querySelectorAll('.filter-btn');
    const resourceCards = document.querySelectorAll('.resource-card');
    const resultCount = document.getElementById('resultCount');
    
    let currentFilter = 'all';
    let currentSearch = '';
    let searchTimeout;

    // Search functionality with debouncing
    searchInput.addEventListener('input', (e) => {
      currentSearch = e.target.value.toLowerCase().trim();
      clearSearchBtn.classList.toggle('hidden', currentSearch === '');
      
      // Debounce search for better performance
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        filterResources();
      }, 150);
    });

    // Clear search
    clearSearchBtn.addEventListener('click', () => {
      searchInput.value = '';
      currentSearch = '';
      clearSearchBtn.classList.add('hidden');
      filterResources();
      searchInput.focus();
    });

    // Filter functionality
    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        // Remove active class from all buttons
        filterBtns.forEach(b => b.classList.remove('active'));
        // Add active class to clicked button
        btn.classList.add('active');
        
        currentFilter = btn.getAttribute('data-filter');
        filterResources();
      });
    });

    // Main filter function
    function filterResources() {
      let visibleCount = 0;
      
      resourceCards.forEach(card => {
        const cardType = card.getAttribute('data-type') || '';
        const cardTags = card.getAttribute('data-tags') || '';
        const cardText = card.textContent.toLowerCase();
        
        // Check filter match
        const filterMatch = currentFilter === 'all' || 
                           cardType.includes(currentFilter);
        
        // Check search match
        const searchMatch = currentSearch === '' || 
                           cardText.includes(currentSearch) ||
                           cardTags.includes(currentSearch);
        
        // Show/hide card
        if (filterMatch && searchMatch) {
          card.classList.remove('hidden');
          visibleCount++;
        } else {
          card.classList.add('hidden');
        }
      });
      
      // Update counter
      resultCount.textContent = visibleCount;
      
      // Animate counter
      resultCount.style.transform = 'scale(1.2)';
      setTimeout(() => {
        resultCount.style.transform = 'scale(1)';
      }, 200);
    }

    // Ripple effect for buttons
    document.querySelectorAll('.ripple').forEach(button => {
      button.addEventListener('click', function(e) {
        const ripple = document.createElement('span');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;
        
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = x + 'px';
        ripple.style.top = y + 'px';
        ripple.classList.add('ripple-effect');
        
        this.appendChild(ripple);
        
        setTimeout(() => {
          ripple.remove();
        }, 600);
      });
    });

    // Add subtle parallax to hero section
    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      const hero = document.querySelector('section[class*="bg-gradient-to-br from-flcNavy"]');
      if (hero && scrolled < window.innerHeight) {
        hero.style.transform = `translateY(${scrolled * 0.5}px)`;
      }
    });

    // Remove pulse animation after 5 seconds
    setTimeout(() => {
      document.querySelectorAll('.pulse-new').forEach(el => {
        el.classList.remove('pulse-new');
      });
    }, 5000);

    // Initialize result count on page load
    window.addEventListener('DOMContentLoaded', () => {
      resultCount.textContent = resourceCards.length;
    });

    // Error handling for PDF downloads
    document.querySelectorAll('a[download]').forEach(link => {
      link.addEventListener('click', async (e) => {
        const pdfUrl = link.getAttribute('href');
        
        // Check if PDF exists before downloading
        try {
          const response = await fetch(pdfUrl, { method: 'HEAD' });
          if (!response.ok) {
            e.preventDefault();
            alert('Sorry, this resource is temporarily unavailable. Please try again later or contact support.');
            console.error(`PDF not found: ${pdfUrl}`);
          }
        } catch (error) {
          // If fetch fails (CORS or network), allow the download to proceed
          // The browser will handle the 404 naturally
          console.warn('Unable to verify PDF availability:', error);
        }
      });
    });

    // Error handling for external links
    document.querySelectorAll('a[target="_blank"]').forEach(link => {
      link.addEventListener('click', (e) => {
        const url = link.getAttribute('href');
        if (!url || url === '#') {
          e.preventDefault();
          showToast('This link is not yet configured.', 'info');
        }
      });
    });

    // Toast Notification System
    function showToast(message, type = 'info', duration = 3000) {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <div class="flex items-center gap-3">
          <div class="flex-shrink-0">
            ${type === 'success' ? '✓' : type === 'error' ? '✕' : 'ℹ'}
          </div>
          <div class="flex-1 text-sm font-medium text-flcCharcoal">${message}</div>
        </div>
      `;
      
      container.appendChild(toast);
      
      // Trigger animation
      setTimeout(() => toast.classList.add('show'), 10);
      
      // Auto remove
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, duration);
    }

    // Reading Progress Bar
    const readingProgress = document.getElementById('readingProgress');
    
    function updateReadingProgress() {
      const windowHeight = window.innerHeight;
      const documentHeight = document.documentElement.scrollHeight - windowHeight;
      const scrolled = window.pageYOffset;
      const progress = (scrolled / documentHeight) * 100;
      
      readingProgress.style.width = `${Math.min(progress, 100)}%`;
    }
    
    window.addEventListener('scroll', updateReadingProgress, { passive: true });

    // Scroll to Top Button
    const scrollTopBtn = document.getElementById('scrollTopBtn');
    
    function toggleScrollTopButton() {
      if (window.pageYOffset > 500) {
        scrollTopBtn.classList.add('visible');
      } else {
        scrollTopBtn.classList.remove('visible');
      }
    }
    
    scrollTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
      showToast('Scrolled to top', 'success', 1500);
    });
    
    window.addEventListener('scroll', toggleScrollTopButton, { passive: true });

    // Keyboard Shortcuts
    document.addEventListener('keydown', (e) => {
      // Ctrl/Cmd + K: Focus search
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        searchInput.focus();
        searchInput.select();
        showToast('Search focused (Ctrl+K)', 'info', 2000);
      }
      
      // Escape: Clear search
      if (e.key === 'Escape' && document.activeElement === searchInput) {
        searchInput.value = '';
        currentSearch = '';
        clearSearchBtn.classList.add('hidden');
        filterResources();
        searchInput.blur();
      }
      
      // Ctrl/Cmd + Arrow keys: Navigate filters
      if ((e.ctrlKey || e.metaKey) && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {
        e.preventDefault();
        const activeBtn = document.querySelector('.filter-btn.active');
        const allBtns = Array.from(filterBtns);
        const currentIndex = allBtns.indexOf(activeBtn);
        
        let nextIndex;
        if (e.key === 'ArrowRight') {
          nextIndex = (currentIndex + 1) % allBtns.length;
        } else {
          nextIndex = (currentIndex - 1 + allBtns.length) % allBtns.length;
        }
        
        allBtns[nextIndex].click();
      }
    });

    // Copy link to clipboard functionality
    document.querySelectorAll('.resource-card').forEach((card, index) => {
      card.addEventListener('dblclick', () => {
        const title = card.querySelector('h3, h4')?.textContent || 'Resource';
        const url = `${window.location.origin}${window.location.pathname}#resource-${index}`;
        
        navigator.clipboard.writeText(url).then(() => {
          showToast(`Link copied: ${title}`, 'success');
        }).catch(() => {
          showToast('Failed to copy link', 'error');
        });
      });
    });

    // Animated counter for stats
    function animateCounter(element, target, duration = 1000) {
      let start = 0;
      const increment = target / (duration / 16);
      
      const timer = setInterval(() => {
        start += increment;
        if (start >= target) {
          element.textContent = target + (target < 100 ? '+' : '');
          clearInterval(timer);
        } else {
          element.textContent = Math.floor(start);
        }
      }, 16);
    }

    // Observe stats and animate when visible
    const statsObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !entry.target.dataset.animated) {
          const text = entry.target.textContent;
          const number = parseInt(text.replace(/\D/g, ''));
          entry.target.dataset.animated = 'true';
          entry.target.classList.add('count-animate');
          animateCounter(entry.target, number, 1500);
        }
      });
    }, { threshold: 0.5 });

    document.querySelectorAll('.text-3xl, .text-5xl').forEach(el => {
      if (el.textContent.match(/\d+/)) {
        statsObserver.observe(el);
      }
    });

    // Add download tracking
    document.querySelectorAll('a[download]').forEach(link => {
      const existingHandler = link.onclick;
      link.addEventListener('click', (e) => {
        const filename = link.getAttribute('href');
        showToast('Download started...', 'info', 2000);
        console.log(`Download initiated: ${filename}`);
      });
    });

    // Last visited tracking
    const lastVisit = localStorage.getItem('lastVisit');
    const now = new Date().getTime();
    
    if (lastVisit) {
      const daysSince = Math.floor((now - lastVisit) / (1000 * 60 * 60 * 24));
      if (daysSince > 7) {
        setTimeout(() => {
          showToast(`Welcome back! You last visited ${daysSince} days ago.`, 'info', 4000);
        }, 1000);
      }
    } else {
      setTimeout(() => {
        showToast('Welcome to FLC Publishing House! 📚', 'info', 3000);
      }, 500);
    }
    
    localStorage.setItem('lastVisit', now);

    // Performance: Lazy load images if added later
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            if (img.dataset.src) {
              img.src = img.dataset.src;
              img.removeAttribute('data-src');
              imageObserver.unobserve(img);
            }
          }
        });
      });

      document.querySelectorAll('img[data-src]').forEach(img => {
        imageObserver.observe(img);
      });
    }

    // Quick filter toggle with animation feedback
    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        btn.style.transform = 'scale(0.95)';
        setTimeout(() => {
          btn.style.transform = '';
        }, 100);
      });
    });

    // Console easter egg for developers
    console.log('%cFLC Publishing House', 'font-size: 24px; font-weight: bold; color: #1A3A52;');
    console.log('%cKeyboard shortcuts:\n- Ctrl/Cmd + K: Focus search\n- Esc: Clear search\n- Ctrl/Cmd + Arrow keys: Navigate filters\n- Double-click card: Copy link', 'color: #9A7B4F;');

    // ========================================
    // FAVORITES/BOOKMARKING SYSTEM
    // ========================================
    
    const STORAGE_KEY = 'flc_bookmarks';
    
    function getBookmarks() {
      const stored = localStorage.getItem(STORAGE_KEY);
      return stored ? JSON.parse(stored) : [];
    }
    
    function saveBookmark(resourceId) {
      const bookmarks = getBookmarks();
      if (!bookmarks.includes(resourceId)) {
        bookmarks.push(resourceId);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(bookmarks));
        return true;
      }
      return false;
    }
    
    function removeBookmark(resourceId) {
      const bookmarks = getBookmarks();
      const filtered = bookmarks.filter(id => id !== resourceId);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));
    }
    
    function isBookmarked(resourceId) {
      return getBookmarks().includes(resourceId);
    }
    
    // Initialize bookmark buttons
    document.querySelectorAll('.bookmark-btn').forEach(btn => {
      const resourceId = btn.dataset.resourceId;
      
      // Set initial state
      if (isBookmarked(resourceId)) {
        btn.classList.add('bookmarked');
      }
      
      // Handle clicks
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        
        if (btn.classList.contains('bookmarked')) {
          removeBookmark(resourceId);
          btn.classList.remove('bookmarked');
          showToast('Removed from favorites', 'info', 2000);
        } else {
          saveBookmark(resourceId);
          btn.classList.add('bookmarked');
          showToast('Added to favorites! ⭐', 'success', 2000);
        }
      });
    });

    // ========================================
    // AUDIO PLAYER
    // ========================================
    
    const audioElement = document.getElementById('audioElement');
    const playBtn = document.getElementById('audioPlayBtn');
    const progressBar = document.getElementById('audioProgressBar');
    const progressFill = document.getElementById('audioProgressFill');
    const timeDisplay = document.getElementById('audioTime');
    
    let isPlaying = false;
    
    // Format time helper
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs.toString().padStart(2, '0')}`;
    }
    
    // Play/Pause toggle
    playBtn.addEventListener('click', async () => {
      // Load audio source if not loaded
      if (!audioElement.src || audioElement.src === window.location.href) {
        audioElement.load();
      }
      
      if (isPlaying) {
        audioElement.pause();
        playBtn.innerHTML = '<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg>';
        isPlaying = false;
      } else {
        try {
          await audioElement.play();
          playBtn.innerHTML = '<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"></path></svg>';
          isPlaying = true;
          showToast('Playing sermon audio 🎵', 'success', 2000);
        } catch (error) {
          console.error('Audio playback failed:', error);
          showToast('Unable to play audio. Please try again.', 'error', 3000);
          isPlaying = false;
        }
      }
    });
    
    // Update progress
    audioElement.addEventListener('timeupdate', () => {
      const progress = (audioElement.currentTime / audioElement.duration) * 100;
      progressFill.style.width = `${progress}%`;
      timeDisplay.textContent = `${formatTime(audioElement.currentTime)} / ${formatTime(audioElement.duration)}`;
    });
    
    // Seek functionality
    progressBar.addEventListener('click', (e) => {
      if (!audioElement.duration) return;
      const rect = progressBar.getBoundingClientRect();
      const pos = (e.clientX - rect.left) / rect.width;
      audioElement.currentTime = pos * audioElement.duration;
    });
    
    // Reset on end
    audioElement.addEventListener('ended', () => {
      isPlaying = false;
      playBtn.innerHTML = '<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg>';
      progressFill.style.width = '0%';
      showToast('Sermon completed! 🎉', 'success', 3000);
    });
    
    // Load metadata
    audioElement.addEventListener('loadedmetadata', () => {
      timeDisplay.textContent = `0:00 / ${formatTime(audioElement.duration)}`;
      console.log('Audio loaded successfully:', audioElement.duration, 'seconds');
    });
    
    // Error handling for audio loading
    audioElement.addEventListener('error', (e) => {
      console.error('Audio loading error:', e);
      showToast('Error loading audio file. Please check the file path.', 'error', 3000);
    });
    
    // Log when audio is ready
    audioElement.addEventListener('canplay', () => {
      console.log('Audio ready to play');
    });

    // ========================================
    // PROGRESS TRACKING
    // ========================================
    
    const PROGRESS_KEY = 'flc_progress';
    
    function getProgress() {
      const stored = localStorage.getItem(PROGRESS_KEY);
      return stored ? JSON.parse(stored) : {};
    }
    
    function markAsCompleted(resourceId) {
      const progress = getProgress();
      progress[resourceId] = { status: 'completed', date: new Date().toISOString() };
      localStorage.setItem(PROGRESS_KEY, JSON.stringify(progress));
    }
    
    function markAsInProgress(resourceId) {
      const progress = getProgress();
      if (!progress[resourceId] || progress[resourceId].status !== 'completed') {
        progress[resourceId] = { status: 'in-progress', date: new Date().toISOString() };
        localStorage.setItem(PROGRESS_KEY, JSON.stringify(progress));
      }
    }
    
    // Initialize progress badges
    document.querySelectorAll('[data-resource-id]').forEach(card => {
      const resourceId = card.dataset.resourceId;
      const progress = getProgress();
      const badge = card.querySelector('.progress-badge');
      
      if (badge && progress[resourceId]) {
        badge.style.display = 'inline-flex';
        if (progress[resourceId].status === 'in-progress') {
          badge.classList.add('in-progress');
          badge.innerHTML = '<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>In Progress';
        }
      }
    });
    
    // Track downloads as completion
    document.querySelectorAll('a[download]').forEach(link => {
      link.addEventListener('click', () => {
        const card = link.closest('[data-resource-id]');
        if (card) {
          markAsCompleted(card.dataset.resourceId);
        }
      });
    });
    
    // Track video views as in-progress
    document.querySelectorAll('a[href*="youtube.com"]').forEach(link => {
      link.addEventListener('click', () => {
        const card = link.closest('[data-resource-id]');
        if (card) {
          markAsInProgress(card.dataset.resourceId);
        }
      });
    });

    // ========================================
    // QUICK JUMP TO LATEST
    // ========================================
    
    const quickJumpFab = document.getElementById('quickJumpFab');
    
    quickJumpFab.addEventListener('click', () => {
      // Find the featured collection (first resource)
      const featuredCard = document.querySelector('[data-resource-id="sermon-1"]');
      if (featuredCard) {
        featuredCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // Highlight effect
        featuredCard.style.transition = 'box-shadow 0.3s ease';
        featuredCard.style.boxShadow = '0 0 0 4px rgba(154, 123, 79, 0.3)';
        setTimeout(() => {
          featuredCard.style.boxShadow = '';
        }, 2000);
        
        showToast('Viewing latest sermon', 'info', 2000);
      }
    });

    // ========================================
    // EMAIL SUBSCRIPTION MODAL
    // ========================================
    
    const subscriptionModal = document.getElementById('subscriptionModal');
    const modalClose = document.getElementById('modalClose');
    const subscriptionForm = document.getElementById('subscriptionForm');
    const heroSubscribeBtn = document.getElementById('heroSubscribeBtn');
    
    // Open modal
    function openSubscriptionModal() {
      subscriptionModal.classList.add('show');
      document.body.style.overflow = 'hidden';
    }
    
    // Close modal
    function closeSubscriptionModal() {
      subscriptionModal.classList.remove('show');
      document.body.style.overflow = '';
    }
    
    // Event listeners
    heroSubscribeBtn.addEventListener('click', openSubscriptionModal);
    modalClose.addEventListener('click', closeSubscriptionModal);
    
    // Close on overlay click
    subscriptionModal.addEventListener('click', (e) => {
      if (e.target === subscriptionModal) {
        closeSubscriptionModal();
      }
    });
    
    // Close on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && subscriptionModal.classList.contains('show')) {
        closeSubscriptionModal();
      }
    });
    
    // Handle form submission
    subscriptionForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const formData = new FormData(subscriptionForm);
      const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        preferences: {
          newSermon: formData.get('newSermon') === 'on',
          weeklyDigest: formData.get('weeklyDigest') === 'on',
          studyGuides: formData.get('studyGuides') === 'on',
        },
        subscribedAt: new Date().toISOString()
      };
      
      // Store subscription (in production, send to backend)
      localStorage.setItem('flc_subscription', JSON.stringify(data));
      
      // Show success
      showToast(`Welcome ${data.name}! You're now subscribed. 🎉`, 'success', 4000);
      
      // Close modal
      closeSubscriptionModal();
      
      // Reset form
      subscriptionForm.reset();
      
      // Log for integration (replace with actual API call)
      console.log('New subscription:', data);
    });
    
    // Check if already subscribed
    const existingSubscription = localStorage.getItem('flc_subscription');
    if (!existingSubscription) {
      // Show subscription prompt after 30 seconds
      setTimeout(() => {
        if (!localStorage.getItem('flc_subscription')) {
          openSubscriptionModal();
        }
      }, 30000);
    }
    
    // Show stats for bookmarked/completed items
    function updateUserStats() {
      const bookmarks = getBookmarks();
      const progress = getProgress();
      const completed = Object.values(progress).filter(p => p.status === 'completed').length;
      
      console.log(`%cYour Stats:\n📚 Bookmarks: ${bookmarks.length}\n✅ Completed: ${completed}`, 'color: #9A7B4F; font-size: 14px;');
    }
    
    updateUserStats();
  </script>
</body>
</html>
