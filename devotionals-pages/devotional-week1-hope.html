<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Week 1: The Light of Hope - Advent Devotional</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'heading': ['Playfair Display', 'serif'],
            'sans': ['Inter', 'sans-serif']
          },
          colors: {
            flcNavy: '#1A3A52',
            flcGold: '#9A7B4F',
            flcGoldLight: '#B8956A',
            flcCharcoal: '#2C2C2C',
            flcCream: '#F5F1E8',
            flcOffWhite: '#FAFAF8',
            flcBorder: '#E5E0D8'
          }
        }
      }
    }
  </script>
  
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #FAFAF8 0%, #F5F1E8 50%, #FAFAF8 100%);
      line-height: 1.8;
    }

    /* Print Styles */
    @media print {
      .no-print { display: none !important; }
      body { background: white !important; }
      .day-card { page-break-inside: avoid; box-shadow: none !important; }
      .scripture-section, .reflection-section, .prayer-section { page-break-inside: avoid; }
    }

    /* Highlight Styles */
    .highlight-yellow { background-color: #fef08a; padding: 2px 4px; border-radius: 3px; }
    .highlight-green { background-color: #bbf7d0; padding: 2px 4px; border-radius: 3px; }
    .highlight-pink { background-color: #fbcfe8; padding: 2px 4px; border-radius: 3px; }

    /* Selection Style */
    ::selection {
      background-color: #fef3c7;
      color: #92400e;
    }

    /* Quote Decoration */
    .quote-decoration {
      position: relative;
      padding-left: 2rem;
    }

    .quote-decoration::before {
      content: '"';
      position: absolute;
      left: 0;
      top: -10px;
      font-size: 4rem;
      font-family: Georgia, serif;
      color: #9A7B4F;
      opacity: 0.2;
      line-height: 1;
    }

    /* Note Area */
    .note-area {
      resize: vertical;
      min-height: 100px;
      font-family: 'Inter', sans-serif;
    }

    /* Text-to-Speech Button */
    .audio-player-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: linear-gradient(135deg, #1A3A52 0%, #2A4A62 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .audio-player-btn:hover {
      background: linear-gradient(135deg, #2A4A62 0%, #1A3A52 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(26, 58, 82, 0.3);
    }

    .audio-player-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .audio-player-btn svg {
      width: 1rem;
      height: 1rem;
    }

    /* Audio Player Styles */
    .audio-player {
      background: linear-gradient(135deg, #1A3A52 0%, #2A4A62 100%);
      border-radius: 12px;
      padding: 16px;
      color: white;
      box-shadow: 0 4px 12px rgba(26, 58, 82, 0.15);
    }

    .audio-progress {
      height: 6px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      overflow: hidden;
      cursor: pointer;
    }

    .audio-progress-bar {
      height: 100%;
      background: white;
      width: 0%;
      transition: width 0.1s;
    }

    /* Section Icons */
    .section-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
    }

    /* Scripture Section */
    .scripture-section {
      background: linear-gradient(135deg, #F5F1E8 0%, #FAFAF8 100%);
      border-left: 4px solid #9A7B4F;
      border-radius: 16px;
      padding: 24px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(26, 58, 82, 0.08);
    }

    /* Reflection Section */
    .reflection-section {
      background: linear-gradient(135deg, #F5F1E8 0%, #E8E6E1 100%);
      border-left: 4px solid #2A4A62;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 4px 12px rgba(26, 58, 82, 0.08);
    }

    /* Prayer Section */
    .prayer-section {
      background: linear-gradient(135deg, #E8E6E1 0%, #FAFAF8 100%);
      border-left: 4px solid #1A3A52;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 4px 12px rgba(26, 58, 82, 0.08);
    }

    /* Hover Effects */
    .highlight-btn {
      transition: all 0.2s;
      cursor: pointer;
    }

    .highlight-btn:hover {
      transform: scale(1.1);
    }

    .highlight-btn:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body class="bg-gray-50">
  
  <!-- Header Container -->
  <div id="headerContainer" 
       data-config='{"logoPath": "../assets/images/Dark Logo.png", "homePath": "../index.html", "libraryPath": "../pages/library.html", "devotionalsPath": "../pages/devotionals.html", "resourcesPath": "../pages/resources.html"}'></div>
  <script src="../assets/js/header-component.js"></script>

  <!-- Main Content -->
  <main class="max-w-4xl mx-auto px-4 sm:px-6 py-12">
    
    <!-- Back Button -->
    <div class="mb-6 no-print">
      <a href="../pages/devotionals.html" class="inline-flex items-center text-flcNavy hover:text-flcGold transition-colors font-medium">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        Back to All Weeks
      </a>
    </div>

    <!-- Week Header with Image -->
    <header class="mb-12">
      <div class="rounded-2xl shadow-2xl p-6 sm:p-8 lg:p-10" style="background: linear-gradient(135deg, #0F2838 0%, #1A3A52 50%, #0F2838 100%);">
        <!-- Image in top-left corner -->
        <div class="float-left mr-6 mb-4 w-48 sm:w-64 lg:w-80">
          <img src="../assets/images/Light of Hope.webp" alt="The Light of Hope" class="w-full h-auto object-contain rounded-lg">
        </div>
        
        <!-- Content -->
        <div class="text-white">
          <!-- Meta Info -->
          <div class="flex flex-wrap items-center gap-3 mb-4">
            <div class="inline-flex items-center gap-2 bg-flcGold/20 backdrop-blur-sm px-3 py-1.5 rounded-full text-xs font-bold text-flcGold border border-flcGold/30">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path>
              </svg>
              <span>WEEK 1 ‚Ä¢ NOVEMBER 30-DECEMBER 6</span>
            </div>
            <div class="inline-flex items-center gap-2 text-white/70 text-xs">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <span>15 min read</span>
            </div>
          </div>
          
          <!-- Title -->
          <h1 class="text-3xl sm:text-4xl lg:text-5xl font-heading font-bold mb-3 leading-tight">The Light of Hope</h1>
          
          <!-- Description -->
          <p class="text-base sm:text-lg text-white/90 mb-4 leading-relaxed">Exploring the prophecies of the Messiah and how God's promise of a Savior brought hope to a world waiting in darkness.</p>
          
          <!-- Author -->
          <div class="flex items-center gap-2 text-white/70 text-sm mb-6">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            <span>By Jarrel Oliveira</span>
          </div>
          
          <!-- Scripture Box -->
          <div class="bg-white/10 backdrop-blur-sm border-l-4 border-flcGold rounded-lg p-5 clear-both">
            <p class="text-flcGold font-bold text-sm mb-3">Titus 1:1‚Äì3</p>
            <p class="text-white/90 italic text-sm leading-relaxed">
              "Paul, a servant of God and an apostle of Jesus Christ, for the faith of God's elect and their knowledge of the truth that leads to godliness, in the hope of eternal life that God, who cannot lie, promised before time began. In his own time he has revealed his word in the preaching with which I was entrusted by the command of God our Savior."
            </p>
          </div>
        </div>
      </div>
    </header>

    <!-- Content Container -->
    <article class="space-y-12">
      
      <!-- Scripture Section -->
      <section class="scripture-section">
        <div class="flex items-start gap-4 mb-6">
          <div class="section-icon bg-flcGold/10 border border-flcGold/20">
            <span>üìñ</span>
          </div>
          <div class="flex-1">
            <h2 class="text-2xl font-heading font-bold text-gray-900 mb-1">Scripture</h2>
            <p class="text-sm text-flcGold font-medium">Isaiah 9:2, 6-7</p>
          </div>
        </div>
        <div class="flex flex-wrap gap-2 no-print mb-6">
          <span class="text-xs text-gray-500 font-medium mr-2 flex items-center">Highlight:</span>
          <button onclick="highlightSelection('yellow')" class="highlight-btn inline-flex items-center gap-1.5 px-3 py-1.5 bg-yellow-100 hover:bg-yellow-200 rounded-lg border border-yellow-400 shadow-sm text-xs font-medium" title="Yellow Highlight">
            <span class="w-3 h-3 rounded bg-yellow-400"></span>
            Yellow
          </button>
          <button onclick="highlightSelection('green')" class="highlight-btn inline-flex items-center gap-1.5 px-3 py-1.5 bg-green-100 hover:bg-green-200 rounded-lg border border-green-400 shadow-sm text-xs font-medium" title="Green Highlight">
            <span class="w-3 h-3 rounded bg-green-400"></span>
            Green
          </button>
          <button onclick="highlightSelection('pink')" class="highlight-btn inline-flex items-center gap-1.5 px-3 py-1.5 bg-pink-100 hover:bg-pink-200 rounded-lg border border-pink-400 shadow-sm text-xs font-medium" title="Pink Highlight">
            <span class="w-3 h-3 rounded bg-pink-400"></span>
            Pink
          </button>
        </div>

        <div class="prose prose-lg max-w-none">
          <div class="quote-decoration text-gray-800 leading-relaxed space-y-4 text-base sm:text-lg" id="scripture-text">
            <p><strong>Verse 2:</strong> The people who walked in darkness have seen a great light; those who dwelt in a land of deep darkness, on them has light shone.</p>
            <p><strong>Verse 6-7:</strong> For to us a child is born, to us a son is given; and the government shall be upon his shoulder, and his name shall be called Wonderful Counselor, Mighty God, Everlasting Father, Prince of Peace. Of the increase of his government and of peace there will be no end, on the throne of David and over his kingdom, to establish it and to uphold it with justice and with righteousness from this time forth and forevermore. The zeal of the Lord of hosts will do this.</p>
          </div>
        </div>
      </section>

      <!-- Reflection Section -->
      <section class="reflection-section">
        <div class="flex items-start gap-4 mb-6">
          <div class="section-icon bg-flcNavy/10 border border-flcNavy/20">
            <span>üí≠</span>
          </div>
          <div class="flex-1">
            <h2 class="text-2xl font-heading font-bold text-gray-900">Reflection</h2>
          </div>
        </div>

        <div class="prose prose-lg max-w-none text-gray-800 leading-relaxed space-y-4 text-base sm:text-lg" id="reflection-text">
          <p>In a world often shrouded in darkness‚Äîwhether through personal struggles, societal challenges, or spiritual doubts‚Äîthe promise of hope shines brightly. Isaiah prophesied about a light that would break through the deepest darkness, a child who would bring salvation and peace.</p>
          
          <p>This hope is not wishful thinking but a confident expectation rooted in God's faithfulness. The names given to this child‚ÄîWonderful Counselor, Mighty God, Everlasting Father, Prince of Peace‚Äîreveal the fullness of who Jesus is and what He came to accomplish.</p>
          
          <p>As we begin this Advent journey, we're reminded that hope is not passive waiting but active trust in God's promises. Just as the Israelites anticipated the Messiah's coming, we too live in anticipation‚Äînot just of Christmas, but of Christ's ultimate return and the complete restoration of all things.</p>
          
          <p>The light has come. The light is here. The light will return. This is our hope.</p>
        </div>
      </section>

      <!-- Prayer Section -->
      <section class="prayer-section">
        <div class="flex items-start gap-4 mb-6">
          <div class="section-icon bg-flcNavyLight/10 border border-flcNavyLight/20">
            <span>üôè</span>
          </div>
          <div>
            <h2 class="text-2xl font-heading font-bold text-gray-900">Prayer</h2>
          </div>
        </div>

        <div class="prose prose-lg max-w-none text-gray-800 leading-relaxed italic text-base sm:text-lg">
          <p>Heavenly Father, thank You for being the source of true hope. In seasons of darkness, help me to remember that Your light has already broken through. Jesus, You are my Wonderful Counselor, Mighty God, Everlasting Father, and Prince of Peace. I place my trust in You today. May Your hope sustain me, encourage me, and overflow from my life to touch others. In Your precious name, Amen.</p>
        </div>
      </section>

      <!-- Personal Notes Section -->
      <section class="bg-white rounded-2xl p-6 sm:p-8 shadow-lg border border-gray-200 no-print">
        <div class="flex items-center gap-3 mb-4">
          <i class="fas fa-sticky-note text-flcGold text-2xl"></i>
          <h2 class="text-2xl font-heading font-bold text-gray-900">Personal Notes</h2>
        </div>
        <p class="text-sm text-gray-600 mb-4"><strong>Note:</strong> Your notes, highlights, and reflections are saved locally on this device only. They are not synced or stored on any server.</p>
        <textarea 
          id="personal-notes"
          class="note-area w-full p-4 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-flcGold focus:border-transparent transition-all"
          placeholder="Start writing your thoughts here..."
          onchange="saveNotes()"
        ></textarea>
        <div class="flex items-center justify-between mt-3 text-xs text-gray-500">
          <span><i class="fas fa-save mr-1"></i>Auto-saved</span>
          <span id="note-count">0 characters</span>
        </div>
      </section>

      <!-- Action Steps Section -->
      <section class="bg-gradient-to-br from-flcGold/10 to-flcGoldLight/10 rounded-2xl p-6 sm:p-8 border-l-4 border-flcGold shadow-lg">
        <h2 class="text-2xl font-heading font-bold text-gray-900 mb-4">This Week's Focus</h2>
        <ul class="space-y-3">
          <li class="flex items-start gap-3">
            <span class="flex-shrink-0 w-6 h-6 bg-flcGold text-white rounded-full flex items-center justify-center text-sm font-bold mt-1">1</span>
            <span class="text-gray-800">Meditate on Isaiah 9:2, 6-7 daily this week</span>
          </li>
          <li class="flex items-start gap-3">
            <span class="flex-shrink-0 w-6 h-6 bg-flcGold text-white rounded-full flex items-center justify-center text-sm font-bold mt-1">2</span>
            <span class="text-gray-800">Share one way Christ has brought hope into your life with someone this week</span>
          </li>
          <li class="flex items-start gap-3">
            <span class="flex-shrink-0 w-6 h-6 bg-flcGold text-white rounded-full flex items-center justify-center text-sm font-bold mt-1">3</span>
            <span class="text-gray-800">Pray for someone you know who needs the light of hope</span>
          </li>
        </ul>
      </section>

    </article>

    <!-- Navigation -->
    <nav class="mt-12 mb-12 no-print">
      <div class="bg-white rounded-2xl shadow-lg p-6 border border-gray-200">
        <div class="flex flex-col sm:flex-row gap-4">
          <a href="../pages/devotionals.html" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-xl font-semibold transition text-center">
            <i class="fas fa-arrow-left mr-2"></i>All Weeks
          </a>
          <button onclick="markComplete('week1')" id="complete-btn" class="flex-1 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-xl font-semibold transition">
            <i class="fas fa-check-circle mr-2"></i>Mark Complete
          </button>
          <a href="devotional-week2-love.html" class="flex-1 bg-flcGold hover:bg-flcGoldLight text-white px-6 py-3 rounded-xl font-semibold transition text-center">
            Next Week<i class="fas fa-arrow-right ml-2"></i>
          </a>
        </div>
      </div>
    </nav>

  </main>

  <!-- Footer -->
  <div id="footerContainer" data-config='{"logoPath": "../assets/images/White Logo.png", "homePath": "../index.html", "libraryPath": "../pages/library.html", "devotionalsPath": "../pages/devotionals.html", "resourcesPath": "../pages/resources.html", "latestSermonPath": "../sermons/sermon-im-under-pressure.html"}'></div>
  <script src="../assets/js/footer-component.js"></script>

  <!-- Scripts -->
  <script>
    // Highlighting functionality
    function highlightSelection(color) {
      const selection = window.getSelection();
      if (!selection.rangeCount || selection.isCollapsed) return;
      
      const range = selection.getRangeAt(0);
      const span = document.createElement('span');
      span.className = `highlight-${color}`;
      
      try {
        range.surroundContents(span);
        selection.removeAllRanges();
        saveHighlights();
      } catch (e) {
        console.log('Could not highlight selection');
      }
    }

    function saveHighlights() {
      const scriptureHTML = document.getElementById('scripture-text').innerHTML;
      const reflectionHTML = document.getElementById('reflection-text').innerHTML;
      localStorage.setItem('week1-scripture-highlights', scriptureHTML);
      localStorage.setItem('week1-reflection-highlights', reflectionHTML);
    }

    function loadHighlights() {
      const scriptureHTML = localStorage.getItem('week1-scripture-highlights');
      const reflectionHTML = localStorage.getItem('week1-reflection-highlights');
      
      if (scriptureHTML) {
        document.getElementById('scripture-text').innerHTML = scriptureHTML;
      }
      if (reflectionHTML) {
        document.getElementById('reflection-text').innerHTML = reflectionHTML;
      }
    }

    function clearAllHighlights() {
      if (confirm('Clear all highlights?')) {
        localStorage.removeItem('week1-scripture-highlights');
        localStorage.removeItem('week1-reflection-highlights');
        location.reload();
      }
    }

    // Notes functionality
    function saveNotes() {
      const notes = document.getElementById('personal-notes').value;
      localStorage.setItem('week1-notes', notes);
      updateNoteCount();
    }

    function loadNotes() {
      const notes = localStorage.getItem('week1-notes');
      if (notes) {
        document.getElementById('personal-notes').value = notes;
        updateNoteCount();
      }
    }

    function updateNoteCount() {
      const count = document.getElementById('personal-notes').value.length;
      document.getElementById('note-count').textContent = `${count} characters`;
    }

    function clearAllNotes() {
      if (confirm('Clear all notes? This cannot be undone.')) {
        document.getElementById('personal-notes').value = '';
        localStorage.removeItem('week1-notes');
        updateNoteCount();
      }
    }

    // Audio player controls
    function toggleAudio(audioId) {
      const audio = document.getElementById(audioId);
      const btnId = audioId === 'scripture-audio' ? 'play-btn' : 'play-btn-reflection';
      const btn = document.getElementById(btnId);
      const icon = btn.querySelector('i');
      
      if (audio.paused) {
        audio.play();
        icon.classList.remove('fa-play');
        icon.classList.add('fa-pause');
      } else {
        audio.pause();
        icon.classList.remove('fa-pause');
        icon.classList.add('fa-play');
      }
    }

    function updateProgress() {
      const audio = document.getElementById('scripture-audio');
      const progress = (audio.currentTime / audio.duration) * 100;
      document.getElementById('progress-bar').style.width = progress + '%';
      
      const minutes = Math.floor(audio.currentTime / 60);
      const seconds = Math.floor(audio.currentTime % 60);
      document.getElementById('audio-time').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    function updateProgressReflection() {
      const audio = document.getElementById('reflection-audio');
      const progress = (audio.currentTime / audio.duration) * 100;
      document.getElementById('progress-bar-reflection').style.width = progress + '%';
      
      const minutes = Math.floor(audio.currentTime / 60);
      const seconds = Math.floor(audio.currentTime % 60);
      document.getElementById('audio-time-reflection').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    function audioEnded() {
      const btn = document.getElementById('play-btn');
      const icon = btn.querySelector('i');
      icon.classList.remove('fa-pause');
      icon.classList.add('fa-play');
      document.getElementById('progress-bar').style.width = '0%';
    }

    function audioEndedReflection() {
      const btn = document.getElementById('play-btn-reflection');
      const icon = btn.querySelector('i');
      icon.classList.remove('fa-pause');
      icon.classList.add('fa-play');
      document.getElementById('progress-bar-reflection').style.width = '0%';
    }

    function seekAudio(event, audioId) {
      const audio = document.getElementById(audioId);
      const progressBar = event.currentTarget;
      const clickX = event.offsetX;
      const width = progressBar.offsetWidth;
      const duration = audio.duration;
      
      audio.currentTime = (clickX / width) * duration;
    }

    // ========================================
    // TEXT-TO-SPEECH
    // ========================================
    
    let currentSpeech = null;
    
    function speakText(section) {
      const btn = document.getElementById(`${section}Btn`);
      const btnText = document.getElementById(`${section}BtnText`);
      
      // Stop if already speaking
      if (currentSpeech && window.speechSynthesis.speaking) {
        window.speechSynthesis.cancel();
        currentSpeech = null;
        btnText.textContent = 'Listen';
        btn.disabled = false;
        return;
      }
      
      // Get text content
      let text = '';
      if (section === 'scripture') {
        const scriptureEl = document.querySelector('.scripture-section p:not(.text-flcGold)');
        text = scriptureEl ? scriptureEl.textContent : '';
      } else if (section === 'reflection') {
        const reflectionEls = document.querySelectorAll('.reflection-section .space-y-4 p');
        text = Array.from(reflectionEls).map(p => p.textContent).join(' ');
      }
      
      if (!text) return;
      
      // Create speech
      currentSpeech = new SpeechSynthesisUtterance(text);
      currentSpeech.rate = 0.9;
      currentSpeech.pitch = 1;
      currentSpeech.volume = 1;
      
      // Update button on start
      currentSpeech.onstart = () => {
        btnText.textContent = 'Stop';
      };
      
      // Reset button on end
      currentSpeech.onend = () => {
        btnText.textContent = 'Listen';
        btn.disabled = false;
        currentSpeech = null;
      };
      
      // Handle errors
      currentSpeech.onerror = () => {
        btnText.textContent = 'Listen';
        btn.disabled = false;
        currentSpeech = null;
      };
      
      // Speak
      window.speechSynthesis.speak(currentSpeech);
    }
    
    // Stop speech when page unloads
    window.addEventListener('beforeunload', () => {
      if (window.speechSynthesis.speaking) {
        window.speechSynthesis.cancel();
      }
    });

    // Mark as complete
    function markComplete(weekId) {
      const progress = JSON.parse(localStorage.getItem('devotionalProgress') || '{"completed":[],"lastRead":0}');
      const weekNum = 1;
      
      if (!progress.completed.includes(weekNum)) {
        progress.completed.push(weekNum);
        progress.lastRead = weekNum;
        localStorage.setItem('devotionalProgress', JSON.stringify(progress));
        
        const btn = document.getElementById('complete-btn');
        btn.innerHTML = '<i class="fas fa-check mr-2"></i>Completed';
        btn.classList.remove('bg-green-600', 'hover:bg-green-700');
        btn.classList.add('bg-green-800', 'cursor-not-allowed');
        btn.disabled = true;
        
        showNotification('Week 1 marked as complete!');
      }
    }

    function checkCompletion() {
      const progress = JSON.parse(localStorage.getItem('devotionalProgress') || '{"completed":[],"lastRead":0}');
      if (progress.completed.includes(1)) {
        const btn = document.getElementById('complete-btn');
        btn.innerHTML = '<i class="fas fa-check mr-2"></i>Completed';
        btn.classList.remove('bg-green-600', 'hover:bg-green-700');
        btn.classList.add('bg-green-800', 'cursor-not-allowed');
        btn.disabled = true;
      }
    }

    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'fixed bottom-8 right-8 bg-green-600 text-white px-6 py-4 rounded-lg shadow-xl z-50 animate-bounce';
      notification.innerHTML = `<i class="fas fa-check-circle mr-2"></i>${message}`;
      document.body.appendChild(notification);
      setTimeout(() => notification.remove(), 3000);
    }

    // Auto-save notes
    document.getElementById('personal-notes').addEventListener('input', () => {
      saveNotes();
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      loadNotes();
      loadHighlights();
      checkCompletion();
      
      const progress = JSON.parse(localStorage.getItem('devotionalProgress') || '{"completed":[],"lastRead":0}');
      progress.lastRead = 1;
      localStorage.setItem('devotionalProgress', JSON.stringify(progress));
    });
  </script>

  <script src="../assets/js/page-transitions.js"></script>

</body>
</html>
