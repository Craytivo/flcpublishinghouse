<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FLC Publishing House | Freedom Life Church</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="FLC Publishing House – curated sermon notes and resources from Freedom Life Church."
  />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../assets/images/Dark_Logo-removebg-preview.png">

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            flcNavy: "#1A3A52",
            flcGold: "#9A7B4F",
            flcCharcoal: "#2C2C2C",
            flcCream: "#F5F1E8",
            flcOffWhite: "#FAFAF8",
            flcBorder: "#E8E6E1",
            flcNavyLight: "#2A4A62",
            flcNavyDark: "#0F2838",
            flcGoldLight: "#B8956A",
            flcGoldDark: "#7A6240",
            flcAccent: "#8B7965",
          },
          fontFamily: {
            heading: ["'Playfair Display'", "Georgia", "serif"],
            body: ["Inter", "-apple-system", "BlinkMacSystemFont", "system-ui", "sans-serif"],
          },
          letterSpacing: {
            widePlus: "0.18em",
            tighter: "-0.02em",
          },
          boxShadow: {
            soft: "0 2px 4px rgba(0, 0, 0, 0.04), 0 4px 8px rgba(0, 0, 0, 0.06)",
            medium: "0 4px 12px rgba(0, 42, 92, 0.08), 0 2px 4px rgba(0, 42, 92, 0.04)",
            hard: "0 8px 24px rgba(0, 42, 92, 0.12), 0 4px 8px rgba(0, 42, 92, 0.06)",
            lift: "0 12px 32px rgba(0, 42, 92, 0.15), 0 6px 12px rgba(0, 42, 92, 0.08)",
            "inner-glow": "inset 0 0 0 1px rgba(198, 146, 20, 0.1), 0 1px 2px rgba(0, 0, 0, 0.05)",
          },
        },
      },
    };
  </script>

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Inter:wght@300;400;500;600&display=swap"
    rel="stylesheet"
  />

  <style>
    /* Page Transition Overlay */
    .page-transition-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1A3A52 0%, #0F2838 100%);
      z-index: 99999;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .page-transition-overlay.active {
      opacity: 1;
      pointer-events: all;
    }
    .page-transition-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(154, 123, 79, 0.2);
      border-top-color: #9A7B4F;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Premium Typography */
    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      overflow-x: hidden;
    }
    html { overflow-x: hidden; max-width: 100vw; scroll-behavior: smooth; }

    /* Fade-in on scroll */
    .fade-in-section {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .fade-in-section.is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Resource Card (kept for your older template cards if you re-enable them) */
    .resource-card {
      background: white;
      border-radius: 1.25rem;
      padding: 1.5rem;
      box-shadow: 0 4px 12px rgba(0, 42, 92, 0.08), 0 2px 4px rgba(0, 42, 92, 0.04);
      border: 1px solid rgba(229, 231, 235, 0.5);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    .resource-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(26, 58, 82, 0.15), 0 6px 12px rgba(26, 58, 82, 0.08);
    }

    /* Gradient text helpers */
    .gradient-text {
      background: linear-gradient(135deg, #1A3A52 0%, #2A4A62 50%, #9A7B4F 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .gradient-text-gold {
      background: linear-gradient(135deg, #B8956A 0%, #9A7B4F 50%, #7A6240 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Buttons / micro-interactions */
    .btn-premium {
      transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
      position: relative;
      will-change: transform;
    }
    .btn-premium:active { transform: scale(0.98); }
    .ripple { position: relative; overflow: hidden; }
    .ripple-effect {
      position: absolute;
      border-radius: 9999px;
      background: rgba(255, 255, 255, 0.35);
      transform: scale(0);
      animation: rippleAnim 600ms ease-out;
      pointer-events: none;
    }
    @keyframes rippleAnim {
      to { transform: scale(2.5); opacity: 0; }
    }

    /* Search Bar + dropdown */
    .search-bar { transition: all 0.3s ease; }
    .search-bar:focus-within {
      box-shadow: 0 0 0 3px rgba(0, 42, 92, 0.1), 0 4px 12px rgba(0, 42, 92, 0.15);
      transform: translateY(-2px);
    }
    #resourceSearch:focus {
      box-shadow: 0 0 0 4px rgba(154, 123, 79, 0.1), 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    #searchDropdown {
      animation: slideDown 0.3s ease-out;
      backdrop-filter: blur(10px);
    }
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    #searchDropdown::-webkit-scrollbar { width: 6px; }
    #searchDropdown::-webkit-scrollbar-thumb { background: #9A7B4F; border-radius: 3px; }
    #searchDropdown::-webkit-scrollbar-thumb:hover { background: #7A6240; }

    .search-result-item {
      padding: 0.875rem 1.25rem;
      border-bottom: 1px solid rgba(229, 224, 216, 0.5);
      transition: all 0.2s ease;
      cursor: pointer;
      display: block;
      text-decoration: none;
    }
    .search-result-item:last-child { border-bottom: none; }
    .search-result-item:hover {
      background: linear-gradient(135deg, rgba(154, 123, 79, 0.05), rgba(184, 149, 106, 0.08));
      padding-left: 1.5rem;
    }
    .search-highlight {
      background: rgba(154, 123, 79, 0.2);
      font-weight: 600;
      padding: 0 2px;
      border-radius: 2px;
    }

    /* Filter pills */
    .filter-btn {
      transition: all 0.2s ease;
      cursor: pointer;
    }
    .filter-btn:hover { transform: scale(1.02); }
    .filter-btn.active {
      background: linear-gradient(135deg, #002A5C, #003875);
      color: white;
      box-shadow: 0 4px 12px rgba(0, 42, 92, 0.3);
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: white;
      border-left: 4px solid #9A7B4F;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      transform: translateX(400px);
      opacity: 0;
      transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index: 1000;
      max-width: 350px;
    }
    .toast.show { transform: translateX(0); opacity: 1; }
    .toast.success { border-left-color: #22c55e; }
    .toast.error { border-left-color: #ef4444; }
    .toast.info { border-left-color: #1A3A52; }

    /* Scroll to Top */
    .scroll-top-btn {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #1A3A52, #2A4A62);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transform: scale(0.8);
      transition: all 0.3s ease;
      z-index: 999;
      box-shadow: 0 4px 12px rgba(26, 58, 82, 0.3);
    }
    .scroll-top-btn.visible {
      opacity: 1;
      visibility: visible;
      transform: scale(1);
    }
    .scroll-top-btn:hover {
      background: linear-gradient(135deg, #2A4A62, #1A3A52);
      box-shadow: 0 6px 20px rgba(26, 58, 82, 0.4);
      transform: scale(1.1);
    }

    /* Quick Jump FAB */
    .quick-jump-fab {
      position: fixed;
      bottom: 5rem;
      right: 2rem;
      background: linear-gradient(135deg, #9A7B4F, #B8956A);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 28px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(154, 123, 79, 0.4);
      transition: all 0.3s ease;
      z-index: 998;
      font-size: 14px;
      font-weight: 600;
      opacity: 0;
      visibility: hidden;
      transform: scale(0.9);
      white-space: nowrap;
    }
    .quick-jump-fab.visible {
      opacity: 1;
      visibility: visible;
      transform: scale(1);
    }
    .quick-jump-fab:hover {
      background: linear-gradient(135deg, #B8956A, #9A7B4F);
      box-shadow: 0 6px 20px rgba(154, 123, 79, 0.5);
      transform: translateY(-2px) scale(1.05);
    }

    /* Subscription Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .modal-overlay.show { opacity: 1; visibility: visible; }
    .modal-content {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    .modal-overlay.show .modal-content { transform: scale(1); }
    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #f1f1f1;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .modal-close:hover { background: #e1e1e1; transform: scale(1.1); }

    /* Form */
    .form-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid #E8E6E1;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.2s ease;
    }
    .form-input:focus {
      outline: none;
      border-color: #1A3A52;
      box-shadow: 0 0 0 3px rgba(26, 58, 82, 0.1);
    }
    .checkbox-label {
      display: flex;
      align-items: start;
      gap: 0.5rem;
      cursor: pointer;
      font-size: 13px;
      color: #666;
    }
    .checkbox-label input[type="checkbox"] { margin-top: 2px; cursor: pointer; }

    /* Hero */
    .hero-background {
      background: linear-gradient(135deg, #0F2838 0%, #1A3A52 50%, #0F2838 100%);
      position: relative;
      overflow: hidden;
    }
    .hero-background::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(154, 123, 79, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(154, 123, 79, 0.05) 0%, transparent 50%);
      opacity: 0.6;
    }
    .hero-particles { position: absolute; inset: 0; overflow: hidden; opacity: 0.08; }
    .particle {
      position: absolute;
      background: radial-gradient(circle, rgba(154, 123, 79, 0.6), transparent 60%);
      border-radius: 50%;
      animation: float 30s infinite ease-in-out;
      filter: blur(2px);
    }
    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.4; }
      50% { transform: translate(20px, -30px) scale(1.1); opacity: 0.7; }
    }
    .hero-glow {
      position: absolute;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(154, 123, 79, 0.08), transparent 70%);
      filter: blur(80px);
      animation: pulse-hero 10s infinite ease-in-out;
    }
    @keyframes pulse-hero { 0%, 100% { transform: scale(1); opacity: 0.5; } 50% { transform: scale(1.1); opacity: 0.8; } }
    .hero-title { text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5); }
    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1.25rem;
      background: linear-gradient(135deg, rgba(154, 123, 79, 0.15), rgba(154, 123, 79, 0.08));
      backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid rgba(154, 123, 79, 0.3);
      border-radius: 24px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      position: relative;
      overflow: hidden;
    }
    .stats-card {
      backdrop-filter: blur(25px) saturate(180%);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }
    .stats-card:hover {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
      border-color: rgba(154, 123, 79, 0.5);
      transform: translateY(-6px) scale(1.02);
      box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(154, 123, 79, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    /* Mobile */
    @media (max-width: 640px) {
      .search-bar { display: none !important; }
      .toast {
        bottom: 1rem;
        right: 1rem;
        left: 1rem;
        max-width: none;
      }
      .quick-jump-fab {
        width: 48px;
        height: 48px;
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        gap: 0;
        bottom: 1.5rem;
        left: 0.75rem;
        right: auto;
      }
      .quick-jump-fab span { display: none; }
      .scroll-top-btn {
        bottom: 1.5rem;
        right: 0.75rem;
        width: 48px;
        height: 48px;
      }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-flcOffWhite via-flcOffWhite to-flcCream/30 text-flcCharcoal font-body antialiased">

  <!-- Page Transition Overlay -->
  <div class="page-transition-overlay" id="pageTransition">
    <div class="page-transition-spinner"></div>
  </div>

  <!-- Header Container -->
  <div
    id="headerContainer"
    data-config='{
      "currentPage": "library",
      "logoPath": "../assets/images/Logo.png",
      "homePath": "../index.html",
      "libraryPath": "library.html",
      "devotionalsPath": "devotionals.html",
      "resourcesPath": "resources.html",
      "logoHeight": "105px"
    }'></div>

  <!-- Load Header Component -->
  <script src="../assets/js/header-component.js"></script>

  <!-- Quick Jump to Latest FAB -->
  <button class="quick-jump-fab" id="quickJumpFab" aria-label="Jump to latest sermon">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
    </svg>
    <span>Latest Sermon</span>
  </button>

  <!-- Scroll to Top Button -->
  <button class="scroll-top-btn" id="scrollTopBtn" aria-label="Scroll to top">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
    </svg>
  </button>

  <!-- Toast Container -->
  <div id="toastContainer"></div>

  <!-- Subscription Modal -->
  <div class="modal-overlay" id="subscriptionModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-label="Subscribe for updates">
      <button class="modal-close" id="modalClose" aria-label="Close modal">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>

      <div class="text-center mb-6">
        <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-flcNavy/10 to-flcGold/10 rounded-full mb-4">
          <svg class="w-8 h-8 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
          </svg>
        </div>
        <h3 class="text-2xl font-heading font-bold text-flcNavy mb-2">Never Miss a Sermon</h3>
        <p class="text-flcCharcoal/70">Get notified when new sermon notes and Bible studies are published</p>
      </div>

      <form id="subscriptionForm" action="https://formspree.io/f/xqayqokw" method="POST" class="space-y-4">
        <div>
          <label for="subName" class="block text-sm font-medium text-flcCharcoal mb-2">Full Name</label>
          <input type="text" id="subName" name="name" required class="form-input" placeholder="John Doe">
        </div>

        <div>
          <label for="subEmail" class="block text-sm font-medium text-flcCharcoal mb-2">Email Address</label>
          <input type="email" id="subEmail" name="email" required class="form-input" placeholder="john@example.com">
        </div>

        <div class="space-y-2">
          <p class="text-sm font-medium text-flcCharcoal mb-2">Notification Preferences</p>
          <label class="checkbox-label">
            <input type="checkbox" name="newSermon" checked>
            <span>New sermon notes published</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="weeklyDigest" checked>
            <span>Weekly digest of resources</span>
          </label>
        </div>

        <button type="submit" class="w-full btn-premium ripple px-6 py-3 rounded-full bg-gradient-to-r from-flcNavy to-flcNavyLight text-white font-semibold tracking-widePlus uppercase text-sm hover:from-flcNavyLight hover:to-flcNavy shadow-md hover:shadow-lg">
          Subscribe Now
        </button>

        <p class="text-xs text-center text-flcCharcoal/50 mt-4">
          We respect your privacy. Unsubscribe anytime.
        </p>
      </form>
    </div>
  </div>

  <main class="min-h-screen">
    <!-- Hero Header - Library Page Custom -->
    <section class="hero-background relative text-white min-h-[70vh] flex items-center">
      <div class="hero-particles">
        <div class="particle" style="top: 12%; left: 15%; width: 4px; height: 4px; animation-delay: 0s;"></div>
        <div class="particle" style="top: 25%; left: 75%; width: 3px; height: 3px; animation-delay: 2s;"></div>
        <div class="particle" style="top: 65%; left: 25%; width: 5px; height: 5px; animation-delay: 4s;"></div>
        <div class="particle" style="top: 45%; left: 85%; width: 4px; height: 4px; animation-delay: 6s;"></div>
        <div class="particle" style="top: 78%; left: 60%; width: 3px; height: 3px; animation-delay: 8s;"></div>
        <div class="particle" style="top: 35%; left: 55%; width: 6px; height: 6px; animation-delay: 10s;"></div>
      </div>

      <div class="hero-glow hidden sm:block" style="top: -180px; right: -80px;"></div>
      <div class="hero-glow hidden sm:block" style="bottom: -260px; left: -120px; animation-delay: 3s;"></div>

      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-20 relative z-10 w-full">
        <div class="grid lg:grid-cols-2 gap-8 sm:gap-12 lg:gap-20 items-center">
          <div class="fade-in-section is-visible space-y-6 sm:space-y-8 text-center lg:text-left">
            <div class="hero-badge inline-block">
              <span class="text-flcGold/90">FLC Library</span>
            </div>

            <h1 class="hero-title font-heading font-bold leading-tight tracking-tight max-w-full overflow-hidden">
              <span class="block text-white mb-1 text-3xl sm:text-4xl md:text-5xl lg:text-5xl xl:text-6xl">The Library</span>
              <span class="block text-flcGoldLight mb-1 text-2xl sm:text-3xl md:text-4xl lg:text-4xl xl:text-5xl">Sermons &amp; Studies</span>
            </h1>

            <div class="space-y-3 sm:space-y-4 lg:space-y-6">
              <p class="text-base sm:text-lg lg:text-xl text-white leading-relaxed font-light max-w-2xl mx-auto lg:mx-0">
                Sermon notes, Bible studies, and devotionals to help you grow.
              </p>
            </div>

            <div class="hero-cta-group flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 justify-center lg:justify-start">
              <a href="#sermons" class="btn-premium inline-flex items-center justify-center px-8 sm:px-10 py-4 sm:py-5 rounded-full bg-gradient-to-r from-flcGold to-flcGoldLight text-flcNavyDark font-bold tracking-wide sm:tracking-widePlus uppercase text-sm hover:from-flcGoldLight hover:to-flcGold shadow-2xl hover:shadow-flcGold/50 transform hover:-translate-y-1 hover:scale-105 transition-all">
                Browse Sermon Notes
              </a>
              <button id="heroSubscribeBtn" class="btn-premium inline-flex items-center justify-center px-6 sm:px-8 py-4 sm:py-5 rounded-full border-2 border-white/30 bg-white/5 text-white font-semibold text-sm tracking-wide uppercase hover:bg-white/15 hover:border-white/50 backdrop-blur-md shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                </svg>
                Get Library Updates
              </button>
            </div>
          </div>

          <div class="flex flex-col gap-4 sm:gap-6 fade-in-section is-visible lg:mt-0 mt-8 sm:mt-12" style="animation-delay: 0.2s;">
            <div class="stats-card rounded-2xl p-6 relative overflow-hidden group">
              <div class="absolute top-0 right-0 w-32 h-32 bg-flcGold/10 rounded-full blur-2xl -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-700"></div>
              <div class="relative z-10">
                <div class="flex items-center gap-2 mb-4">
                  <span class="w-2 h-2 bg-flcGold rounded-full animate-pulse"></span>
                  <p class="text-[11px] uppercase tracking-wider text-flcGold font-bold">Library Highlight</p>
                </div>
                <h3 class="text-2xl font-heading font-bold mb-3 leading-tight">Downloadable Resources</h3>
                <p class="text-sm text-white/70 leading-relaxed">All sermon notes and studies are free to download and share.</p>
                <div class="mt-4 flex items-center gap-2 text-xs text-flcGold/80">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                  </svg>
                  <span>Always Free</span>
                </div>
              </div>
            </div>

            <a href="devotionals.html" class="stats-card rounded-2xl p-6 relative overflow-hidden group block" data-type="devotional" data-tags="advent hope love peace joy december christmas">
              <div class="absolute top-0 right-0 w-32 h-32 bg-flcGold/10 rounded-full blur-2xl -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-700"></div>
              <div class="relative z-10">
                <div class="flex items-center gap-2 mb-3">
                  <svg class="w-5 h-5 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                  </svg>
                  <p class="text-[11px] uppercase tracking-wider text-flcGold font-bold">Devotionals</p>
                </div>
                <h3 class="text-xl font-heading font-bold mb-2 leading-tight text-white">Advent Devotional</h3>
                <p class="text-sm text-white/70 leading-relaxed mb-3">4 weeks of daily meditations on Hope, Love, Peace & Joy</p>
                <div class="flex items-center gap-2 text-xs text-flcGold group-hover:translate-x-1 transition-transform">
                  <span>Start Week 1</span>
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                  </svg>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content Container -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20 relative z-20">

      <!-- Search & Filter Bar -->
      <section class="mb-10 fade-in-section is-visible">
        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
          <div class="flex-1">
            <div class="search-bar relative bg-white border border-flcBorder/60 rounded-2xl px-4 py-3 shadow-sm">
              <div class="flex items-center gap-3">
                <div class="flex items-center justify-center w-10 h-10 rounded-xl bg-flcGold/10">
                  <svg id="searchIcon" class="w-5 h-5 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z"></path>
                  </svg>
                  <svg id="searchSpinner" class="w-5 h-5 text-flcGold hidden" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="3" opacity="0.25"></circle>
                    <path d="M22 12a10 10 0 00-10-10" fill="none" stroke="currentColor" stroke-width="3">
                      <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="0.8s" repeatCount="indefinite"></animateTransform>
                    </path>
                  </svg>
                </div>

                <div class="flex-1">
                  <label for="resourceSearch" class="sr-only">Search resources</label>
                  <input
                    id="resourceSearch"
                    type="text"
                    class="w-full bg-transparent outline-none text-sm text-flcCharcoal placeholder:text-flcCharcoal/50"
                    placeholder="Search sermons, devotionals, Bible studies..."
                    autocomplete="off"
                  />
                </div>

                <button id="clearSearch" class="hidden px-3 py-2 rounded-xl text-xs font-semibold text-flcNavy hover:bg-flcNavy/5 transition-colors" type="button">
                  Clear
                </button>

                <div id="searchResultBadge" class="hidden ml-2 px-3 py-1.5 rounded-full bg-flcGold/10 border border-flcGold/20 text-xs text-flcGold font-semibold">
                  <span id="resultCount">0</span> results
                </div>
              </div>

              <!-- Dropdown -->
              <div id="searchDropdown" class="hidden absolute left-0 right-0 top-[calc(100%+10px)] bg-white/95 border border-flcBorder rounded-2xl shadow-xl overflow-hidden max-h-[420px] overflow-y-auto z-50">
                <div class="px-5 py-3 border-b border-flcBorder/60 flex items-center justify-between">
                  <p class="text-xs font-semibold text-flcCharcoal/60 uppercase tracking-wider">Top matches</p>
                  <p class="text-xs text-flcCharcoal/50">Press Esc to clear</p>
                </div>
                <div id="searchResults"></div>
              </div>
            </div>
          </div>

          <div class="flex flex-wrap gap-2">
            <button class="filter-btn active px-4 py-2 rounded-xl bg-white border border-flcBorder/60 text-sm font-semibold text-flcCharcoal" data-filter="all" type="button">All</button>
            <button class="filter-btn px-4 py-2 rounded-xl bg-white border border-flcBorder/60 text-sm font-semibold text-flcCharcoal" data-filter="sermon" type="button">Sermons</button>
            <button class="filter-btn px-4 py-2 rounded-xl bg-white border border-flcBorder/60 text-sm font-semibold text-flcCharcoal" data-filter="devotional" type="button">Devotionals</button>
            <button class="filter-btn px-4 py-2 rounded-xl bg-white border border-flcBorder/60 text-sm font-semibold text-flcCharcoal" data-filter="study" type="button">Bible Studies</button>
          </div>
        </div>
      </section>

      <!-- Featured Post -->
      <section class="mb-16 lg:mb-24 relative z-20 fade-in-section is-visible" id="latest">
        <div class="mb-8">
          <div class="flex items-center gap-3 mb-2">
            <div class="h-px w-12 bg-gradient-to-r from-flcGold to-transparent"></div>
            <span class="text-xs font-semibold text-flcGold uppercase tracking-[0.2em]">Featured Post</span>
          </div>
        </div>

        <article class="relative bg-gradient-to-br from-white via-flcOffWhite/50 to-white rounded-3xl overflow-hidden shadow-xl border border-flcBorder/30 group hover:shadow-2xl transition-all duration-500">
          <div class="absolute inset-0 opacity-[0.02]" style="background-image: radial-gradient(circle at 1px 1px, rgb(26, 58, 82) 1px, transparent 0); background-size: 40px 40px;"></div>

          <div class="relative grid lg:grid-cols-2 gap-0">
            <!-- Left: Image -->
            <div class="relative h-full min-h-[400px] lg:min-h-[600px] overflow-hidden">
              <div class="absolute inset-0 bg-gradient-to-br from-flcNavy/95 via-flcNavy/90 to-flcNavyDark/95"></div>
              <img src="../assets/images/purpose protected .webp" alt="Purpose Protected Me" class="absolute inset-0 w-full h-full object-cover mix-blend-overlay opacity-40 group-hover:scale-105 transition-transform duration-700">

              <div class="relative h-full flex flex-col justify-between p-8 lg:p-12 text-white">
                <div>
                  <div class="inline-flex items-center gap-2 px-4 py-2 bg-flcGold/20 backdrop-blur-sm rounded-full border border-flcGold/30 mb-6">
                    <svg class="w-4 h-4 text-flcGold" fill="currentColor" viewBox="0 0 20 20">
                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                    </svg>
                    <span class="text-xs font-semibold uppercase tracking-wider">Featured</span>
                  </div>

                  <h2 class="text-4xl lg:text-5xl xl:text-6xl font-heading font-bold leading-[1.1] tracking-tight mb-4">
                    Purpose<br/><span class="text-flcGold">Protected Me</span>
                  </h2>

                  <p class="text-lg text-white/80 mb-4">Latest Sermon</p>

                  <div class="flex items-center gap-3 text-sm text-white/70">
                    <span class="flex items-center gap-2">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                      </svg>
                      Pastor Rohan Samuels
                    </span>
                    <span>•</span>
                    <span>December 7, 2025</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Right: Content -->
            <div class="relative p-8 lg:p-12 flex flex-col justify-between">
              <div>
                <p class="text-lg text-flcCharcoal/80 leading-relaxed mb-8 font-light">
                  When we walk in God's purpose, we are under His divine protection. Discover how purpose becomes your shield against the attacks of the enemy, and how God's plans for your life cannot be thwarted by opposition.
                </p>

                <div class="space-y-6 mb-10">
                  <div class="flex gap-4">
                    <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-flcGold/10 flex items-center justify-center">
                      <svg class="w-6 h-6 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                      </svg>
                    </div>
                    <div>
                      <dt class="text-xs uppercase tracking-wider font-semibold text-flcCharcoal/50 mb-1">Key Scriptures</dt>
                      <dd class="text-sm text-flcCharcoal/80 font-light">Jeremiah 29:11, Romans 8:28, Psalm 138:8</dd>
                    </div>
                  </div>

                  <div class="flex gap-4">
                    <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-flcGold/10 flex items-center justify-center">
                      <svg class="w-6 h-6 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                      </svg>
                    </div>
                    <div>
                      <dt class="text-xs uppercase tracking-wider font-semibold text-flcCharcoal/50 mb-1">Includes</dt>
                      <dd class="text-sm text-flcCharcoal/80 font-light">Sermon outline, discussion questions, prayer points, and action steps</dd>
                    </div>
                  </div>
                </div>

                <div class="flex flex-wrap gap-2 mb-8">
                  <span class="inline-flex items-center gap-1 px-3 py-1.5 bg-flcGold/10 rounded-lg text-flcGold text-xs font-medium border border-flcGold/20">Purpose</span>
                  <span class="inline-flex items-center gap-1 px-3 py-1.5 bg-flcGold/10 rounded-lg text-flcGold text-xs font-medium border border-flcGold/20">Protection</span>
                  <span class="inline-flex items-center gap-1 px-3 py-1.5 bg-flcGold/10 rounded-lg text-flcGold text-xs font-medium border border-flcGold/20">Divine Providence</span>
                </div>
              </div>

              <div class="flex flex-col sm:flex-row gap-3">
                <a href="../sermons/sermon-purpose-protected-me.html" class="flex-1 inline-flex items-center justify-center gap-2 px-6 py-4 bg-flcNavy text-white rounded-xl font-semibold text-sm hover:bg-flcNavyDark transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5">
                  View Sermon Notes
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                  </svg>
                </a>
                <a href="https://www.youtube.com/watch?v=_rxFVAqUc5Q" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center gap-2 px-6 py-4 bg-white text-flcNavy rounded-xl font-semibold text-sm border-2 border-flcBorder hover:border-flcNavy transition-all duration-300 hover:-translate-y-0.5">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                  </svg>
                  Watch
                </a>
                <a href="../assets/pdfs/Purpose Protected Me - Handout.pdf" download class="inline-flex items-center justify-center gap-2 px-6 py-4 bg-white text-flcNavy rounded-xl font-semibold text-sm border-2 border-flcBorder hover:border-flcNavy transition-all duration-300 hover:-translate-y-0.5">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                  </svg>
                  PDF
                </a>
              </div>
            </div>
          </div>
        </article>
      </section>

      <!-- Sermons Section -->
      <section id="sermons" class="w-full bg-white rounded-2xl p-8 mb-10 fade-in-section is-visible">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-2xl font-heading font-bold text-flcNavy">Sermons</h3>
          <span class="text-xs text-flcGold font-semibold uppercase tracking-widePlus">3 Messages</span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <a
            href="../sermons/sermon-purpose-protected-me.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="sermon"
            data-tags="purpose protection divine providence jeremiah 29:11 romans 8:28 psalm 138:8 pastor rohan samuels"
          >
            <div class="aspect-video w-full overflow-hidden rounded-lg mb-4">
              <img src="../assets/images/purpose protected .webp" alt="Purpose Protected Me" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
            </div>
            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Sermon</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">December 7, 2025</span>
            </div>
            <h4 class="text-xl font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">Purpose Protected Me</h4>
            <p class="text-flcCharcoal/70 text-sm mb-4 line-clamp-2">Experience the complete message as Pastor Rohan Samuels explores how God's purpose provides divine protection in our lives.</p>
            <div class="flex items-center gap-2">
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Purpose</span>
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Protection</span>
            </div>
          </a>

          <a
            href="../sermons/sermon-when-compassion-costs-you-sleep.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="sermon"
            data-tags="compassion sacrifice pastor rohan samuels"
          >
            <div class="aspect-video w-full overflow-hidden rounded-lg mb-4">
              <img src="../assets/images/compassion.webp" alt="When Compassion Costs You Sleep" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
            </div>
            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Sermon</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">November 2, 2025</span>
            </div>
            <h4 class="text-xl font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">When Compassion Costs You Sleep</h4>
            <p class="text-flcCharcoal/70 text-sm mb-4 line-clamp-2">Experience the complete message as Pastor Rohan Samuels explores what it means when compassion requires sacrifice.</p>
            <div class="flex items-center gap-2">
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Compassion</span>
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Sacrifice</span>
            </div>
          </a>

          <a
            href="../sermons/sermon-im-under-pressure.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="sermon"
            data-tags="pressure faith pastor rohan samuels"
          >
            <div class="aspect-video w-full overflow-hidden rounded-lg mb-4">
              <img src="../assets/images/Noahs Ark.png" alt="I'm Under Pressure" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
            </div>
            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Sermon</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">November 23, 2024</span>
            </div>
            <h4 class="text-xl font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">I'm Under Pressure</h4>
            <p class="text-flcCharcoal/70 text-sm mb-4 line-clamp-2">Navigate life's pressures with faith and wisdom from Pastor Rohan Samuels.</p>
            <div class="flex items-center gap-2">
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Pressure</span>
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Faith</span>
            </div>
          </a>
        </div>
      </section>

      <!-- Advent Devotionals Section -->
      <section class="w-full bg-white rounded-2xl p-8 mb-10 fade-in-section is-visible">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="text-2xl font-heading font-bold text-flcNavy mb-1">Advent Devotionals</h3>
            <p class="text-sm text-flcCharcoal/60">November 30-December 28, 2025</p>
          </div>
          <span class="text-xs text-flcGold font-semibold uppercase tracking-widePlus">4 Weeks</span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <a
            href="../devotionals-pages/devotional-week1-hope.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="devotional"
            data-tags="advent hope titus 1:1-3 week 1 november 30 december 6"
          >
            <div class="aspect-square w-full overflow-hidden rounded-lg mb-4">
              <img src="../assets/images/Light of Hope.webp" alt="The Light of Hope" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
            </div>
            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Week 1</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">Nov 30-Dec 6</span>
            </div>
            <h4 class="text-lg font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">Hope</h4>
            <p class="text-flcCharcoal/70 text-sm mb-3 line-clamp-2">God's plan for hope began before time itself.</p>
            <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Titus 1:1-3</span>
          </a>

          <a
            href="../devotionals-pages/devotional-week2-love.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="devotional"
            data-tags="advent love john 3:16 week 2 december 7 december 13"
          >
            <div class="aspect-square w-full overflow-hidden rounded-lg mb-4">
              <img src="../assets/images/Light of Love.webp" alt="The Light of Love" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
            </div>
            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Week 2</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">Dec 7-13</span>
            </div>
            <h4 class="text-lg font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">Love</h4>
            <p class="text-flcCharcoal/70 text-sm mb-3 line-clamp-2">God's love is both incomprehensible and deeply personal.</p>
            <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">John 3:16</span>
          </a>

          <a
            href="../devotionals-pages/devotional-week3-peace.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="devotional"
            data-tags="advent peace isaiah 9:6 week 3 december 14 december 20"
          >
            <div class="aspect-square w-full overflow-hidden rounded-lg mb-4">
              <img src="../assets/images/Light of Peace.webp" alt="The Light of Peace" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
            </div>
            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Week 3</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">Dec 14-20</span>
            </div>
            <h4 class="text-lg font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">Peace</h4>
            <p class="text-flcCharcoal/70 text-sm mb-3 line-clamp-2">Christ, the Prince of Peace, restores what was broken.</p>
            <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Isaiah 9:6</span>
          </a>

          <a
            href="../devotionals-pages/devotional-week4-joy.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="devotional"
            data-tags="advent joy luke 2:8-11 week 4 december 21 december 28"
          >
            <div class="aspect-square w-full overflow-hidden rounded-lg mb-4">
              <img src="../assets/images/Light of Joy.webp" alt="The Light of Joy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
            </div>
            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Week 4</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">Dec 21-28</span>
            </div>
            <h4 class="text-lg font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">Joy</h4>
            <p class="text-flcCharcoal/70 text-sm mb-3 line-clamp-2">The good news of Christ's birth brings deep, enduring gladness.</p>
            <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Luke 2:8-11</span>
          </a>
        </div>
      </section>

      <!-- Spiritual Detox (Weeks 1–3) -->
      <section class="w-full bg-white rounded-2xl p-8 mb-10 fade-in-section is-visible">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="text-2xl font-heading font-bold text-flcNavy mb-1">Spiritual Detox</h3>
            <p class="text-sm text-flcCharcoal/60">The Kingdom Blueprint • January 2026</p>
          </div>
          <span class="text-xs text-flcGold font-semibold uppercase tracking-widePlus">Weeks 1–3</span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

          <!-- Week 1 -->
          <a
            href="../spiritual-detox/spiritual-detox-week1.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="study"
            data-tags="spiritual detox week 1 kingdom blueprint january 2026 consecration alignment renewal freedom life church"
          >
            <div class="aspect-video w-full overflow-hidden rounded-lg mb-4 bg-gradient-to-br from-flcNavy to-flcNavyDark flex items-center justify-center relative">
              <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 32px 32px;"></div>
              <div class="relative text-center px-4">
                <p class="text-white/90 text-xs font-semibold tracking-wider">SPIRITUAL DETOX</p>
                <p class="text-flcGold text-lg font-heading font-bold mt-1">WEEK 1</p>
              </div>
            </div>

            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Study</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">January 2026</span>
            </div>

            <h4 class="text-xl font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">
              Spiritual Detox — Week 1
            </h4>

            <p class="text-flcCharcoal/70 text-sm mb-4 line-clamp-2">
              Week 1 of Spiritual Detox: foundations for consecration, alignment, and clearing space for God’s voice.
            </p>

            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Kingdom Blueprint</span>
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Consecration</span>
            </div>
          </a>

          <!-- Week 2 -->
          <a
            href="../spiritual-detox/spiritual-detox-week2.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="study"
            data-tags="spiritual detox week 2 kingdom blueprint january 2026 fasting prayer alignment freedom life church"
          >
            <div class="aspect-video w-full overflow-hidden rounded-lg mb-4 bg-gradient-to-br from-flcNavy to-flcNavyDark flex items-center justify-center relative">
              <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 32px 32px;"></div>
              <div class="relative text-center px-4">
                <p class="text-white/90 text-xs font-semibold tracking-wider">SPIRITUAL DETOX</p>
                <p class="text-flcGold text-lg font-heading font-bold mt-1">WEEK 2</p>
              </div>
            </div>

            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Study</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">January 2026</span>
            </div>

            <h4 class="text-xl font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">
              Spiritual Detox — Week 2
            </h4>

            <p class="text-flcCharcoal/70 text-sm mb-4 line-clamp-2">
              Week 2 deepens the detox through prayer, fasting discipline, and daily alignment with Kingdom patterns.
            </p>

            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Prayer</span>
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Fasting</span>
            </div>
          </a>

          <!-- Week 3 -->
          <a
            href="../spiritual-detox/spiritual-detox-week3.html"
            class="searchable-card group block bg-flcOffWhite/50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30"
            data-type="study"
            data-tags="spiritual detox week 3 kingdom blueprint january 2026 obedience discipline transformation freedom life church"
          >
            <div class="aspect-video w-full overflow-hidden rounded-lg mb-4 bg-gradient-to-br from-flcNavy to-flcNavyDark flex items-center justify-center relative">
              <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 32px 32px;"></div>
              <div class="relative text-center px-4">
                <p class="text-white/90 text-xs font-semibold tracking-wider">SPIRITUAL DETOX</p>
                <p class="text-flcGold text-lg font-heading font-bold mt-1">WEEK 3</p>
              </div>
            </div>

            <div class="flex items-center gap-2 mb-3">
              <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Study</span>
              <span class="text-xs text-flcCharcoal/50">•</span>
              <span class="text-xs text-flcCharcoal/60">January 2026</span>
            </div>

            <h4 class="text-xl font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">
              Spiritual Detox — Week 3
            </h4>

            <p class="text-flcCharcoal/70 text-sm mb-4 line-clamp-2">
              Week 3 focuses on obedience and building habits that protect your spiritual momentum long-term.
            </p>

            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Obedience</span>
              <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Discipline</span>
            </div>
          </a>

        </div>
      </section>

      <!-- Bible Studies Section -->
      <section class="w-full bg-white rounded-2xl p-8 mb-10 fade-in-section is-visible">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="text-2xl font-heading font-bold text-flcNavy mb-2">Bible Studies</h3>
            <p class="text-sm text-flcCharcoal/70 font-light">Deep dives into Scripture with study guides and discussion questions</p>
          </div>
          <span class="text-xs text-flcGold font-semibold uppercase tracking-widePlus">1 Study</span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <a
            href="../bible-studies/bible-study-advent-hope.html"
            class="searchable-card group block bg-gradient-to-br from-flcOffWhite/50 to-white rounded-xl p-6 hover:shadow-lg transition-all duration-300 border border-flcBorder/50 hover:border-flcGold/30 relative overflow-hidden"
            data-type="study"
            data-tags="bible study advent hope titus 1:1-3 week 1 december 3 2024"
          >
            <div class="absolute inset-0 bg-gradient-to-br from-flcGold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <div class="relative">
              <div class="aspect-[4/3] w-full overflow-hidden rounded-lg mb-4 bg-gradient-to-br from-flcNavy to-flcNavyDark flex items-center justify-center relative">
                <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 32px 32px;"></div>
                <div class="relative text-center px-4">
                  <svg class="w-12 h-12 text-flcGold mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                  </svg>
                  <p class="text-white/90 text-xs font-semibold tracking-wider">WEEK 1</p>
                </div>
              </div>

              <div class="flex items-center gap-2 mb-3">
                <span class="text-xs font-semibold text-flcGold uppercase tracking-wider">Bible Study</span>
                <span class="text-xs text-flcCharcoal/50">•</span>
                <span class="text-xs text-flcCharcoal/60">Dec 3, 2024</span>
              </div>

              <h4 class="text-lg font-heading font-bold text-flcNavy mb-2 group-hover:text-flcGold transition-colors">The Light of Hope</h4>
              <p class="text-flcCharcoal/70 text-sm mb-3 line-clamp-2">Exploring God's eternal promise of hope through Titus 1:1-3 with daily devotions and reflections.</p>

              <div class="flex flex-wrap gap-2">
                <span class="inline-flex items-center gap-1 px-3 py-1 bg-flcGold/10 rounded-full text-flcGold text-xs font-medium">Titus 1:1-3</span>
                <a href="../assets/pdfs/Advent - Hope Handout.pdf" download onclick="event.stopPropagation();" class="inline-flex items-center gap-1 px-3 py-1 bg-flcNavy/10 hover:bg-flcNavy/20 rounded-full text-flcNavy text-xs font-medium transition-colors">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                  </svg>
                  PDF
                </a>
              </div>
            </div>
          </a>
        </div>

        <div class="mt-8 p-6 bg-gradient-to-br from-flcNavy/5 to-flcGold/5 rounded-xl border border-flcBorder/30">
          <div class="flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-flcGold/20 flex items-center justify-center">
                <svg class="w-6 h-6 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                </svg>
              </div>
              <div>
                <h4 class="text-base font-heading font-bold text-flcNavy mb-1">Get Notified</h4>
                <p class="text-sm text-flcCharcoal/70 font-light">Be the first to know when new Bible studies are released. Subscribe for updates.</p>
              </div>
            </div>

            <button class="subscribe-btn-footer flex-shrink-0 px-6 py-3 bg-gradient-to-r from-flcGold to-flcGoldLight text-white rounded-xl font-semibold text-sm hover:shadow-lg hover:scale-105 active:scale-95 transition-all duration-300 whitespace-nowrap" type="button">
              Subscribe Now
            </button>
          </div>
        </div>
      </section>

      <!-- Additional Resources -->
      <section aria-labelledby="resources-heading" class="border-t border-flcBorder/30 pt-12 fade-in-section is-visible">
        <h2 id="resources-heading" class="text-3xl sm:text-4xl font-heading font-bold text-flcNavy tracking-tighter mb-6">
          Additional Resources
        </h2>
        <p class="text-base text-flcCharcoal/60 font-light mb-8">
          Tools and materials to support your spiritual journey.
        </p>

        <div class="bg-white rounded-2xl p-8 border border-flcBorder/50">
          <p class="text-sm text-flcCharcoal/70">
            Add more library resources here (PDFs, study guides, links, etc.).
          </p>
        </div>
      </section>

    </section>
  </main>

  <script>
    /* =========================
       Fade-in animation on scroll
    ========================== */
    const observerOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) entry.target.classList.add("is-visible");
      });
    }, observerOptions);

    document.querySelectorAll(".fade-in-section").forEach((el) => observer.observe(el));

    /* =========================
       Toast Notification System
    ========================== */
    function showToast(message, type = "info", duration = 3000) {
      const container = document.getElementById("toastContainer");
      const toast = document.createElement("div");
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <div class="flex items-center gap-3">
          <div class="flex-shrink-0">
            ${type === "success" ? "✓" : type === "error" ? "✕" : "ℹ"}
          </div>
          <div class="flex-1 text-sm font-medium text-flcCharcoal">${message}</div>
        </div>
      `;
      container.appendChild(toast);
      setTimeout(() => toast.classList.add("show"), 10);

      setTimeout(() => {
        toast.classList.remove("show");
        setTimeout(() => toast.remove(), 300);
      }, duration);
    }

    /* =========================
       Page Transition (internal links)
    ========================== */
    const pageTransition = document.getElementById("pageTransition");

    function isInternalSameOriginLink(a) {
      try {
        const url = new URL(a.href, window.location.href);
        return url.origin === window.location.origin;
      } catch {
        return false;
      }
    }

    document.addEventListener("click", (e) => {
      const a = e.target.closest("a");
      if (!a) return;

      const href = a.getAttribute("href") || "";
      const isHashLink = href.startsWith("#");
      const isDownload = a.hasAttribute("download");
      const isBlank = a.getAttribute("target") === "_blank";

      if (isHashLink || isDownload || isBlank) return;
      if (!a.href) return;
      if (!isInternalSameOriginLink(a)) return;

      e.preventDefault();
      pageTransition.classList.add("active");
      setTimeout(() => { window.location.href = a.href; }, 220);
    });

    window.addEventListener("pageshow", () => {
      pageTransition.classList.remove("active");
    });

    /* =========================
       Subscription Modal
    ========================== */
    const subscriptionModal = document.getElementById("subscriptionModal");
    const modalClose = document.getElementById("modalClose");
    const heroSubscribeBtn = document.getElementById("heroSubscribeBtn");
    const footerSubscribeBtn = document.querySelector(".subscribe-btn-footer");

    function openModal() {
      subscriptionModal.classList.add("show");
      subscriptionModal.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }
    function closeModal() {
      subscriptionModal.classList.remove("show");
      subscriptionModal.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    heroSubscribeBtn?.addEventListener("click", openModal);
    footerSubscribeBtn?.addEventListener("click", openModal);
    modalClose?.addEventListener("click", closeModal);

    subscriptionModal?.addEventListener("click", (e) => {
      if (e.target === subscriptionModal) closeModal();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && subscriptionModal.classList.contains("show")) closeModal();
    });

    /* =========================
       Quick Jump + Scroll to top
    ========================== */
    const quickJumpFab = document.getElementById("quickJumpFab");
    const scrollTopBtn = document.getElementById("scrollTopBtn");

    function toggleScrollUI() {
      const y = window.pageYOffset || document.documentElement.scrollTop;

      if (y > 250) quickJumpFab.classList.add("visible");
      else quickJumpFab.classList.remove("visible");

      if (y > 500) scrollTopBtn.classList.add("visible");
      else scrollTopBtn.classList.remove("visible");
    }

    window.addEventListener("scroll", toggleScrollUI, { passive: true });
    window.addEventListener("DOMContentLoaded", toggleScrollUI);

    quickJumpFab.addEventListener("click", () => {
      const latest = document.getElementById("latest");
      latest?.scrollIntoView({ behavior: "smooth", block: "start" });
    });

    scrollTopBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    /* =========================
       Ripple effect
    ========================== */
    document.querySelectorAll(".ripple").forEach((button) => {
      button.addEventListener("click", function (e) {
        const ripple = document.createElement("span");
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;

        ripple.style.width = ripple.style.height = size + "px";
        ripple.style.left = x + "px";
        ripple.style.top = y + "px";
        ripple.classList.add("ripple-effect");

        this.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);
      });
    });

    /* =========================
       Subtle parallax on hero
    ========================== */
    window.addEventListener("scroll", () => {
      const scrolled = window.pageYOffset || 0;
      const hero = document.querySelector(".hero-background");
      if (hero && scrolled < window.innerHeight) {
        hero.style.transform = `translateY(${scrolled * 0.08}px)`;
      }
    }, { passive: true });

    /* =========================
       Search and Filter
       - Search indexes .searchable-card elements
       - Filter toggles by data-type
    ========================== */
    const searchInput = document.getElementById("resourceSearch");
    const clearSearchBtn = document.getElementById("clearSearch");
    const searchIcon = document.getElementById("searchIcon");
    const searchSpinner = document.getElementById("searchSpinner");
    const searchResultBadge = document.getElementById("searchResultBadge");
    const searchDropdown = document.getElementById("searchDropdown");
    const searchResults = document.getElementById("searchResults");
    const filterBtns = document.querySelectorAll(".filter-btn");
    const resourceCards = document.querySelectorAll(".searchable-card");
    const resultCount = document.getElementById("resultCount");

    let currentFilter = "all";
    let currentSearch = "";
    let searchTimeout;

    const searchIndex = Array.from(resourceCards).map((card) => {
      const title = card.querySelector("h2, h3, h4")?.textContent || "";
      const description = card.querySelector("p")?.textContent || "";
      const tags = card.getAttribute("data-tags") || "";
      const type = card.getAttribute("data-type") || "";
      const link = card.getAttribute("href") || "#";
      return { title, description, tags, type, link, element: card };
    });

    function highlightText(text, query) {
      const safeQuery = query.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      const regex = new RegExp(`(${safeQuery})`, "gi");
      return text.replace(regex, '<span class="search-highlight">$1</span>');
    }

    function applyVisibility() {
      const q = currentSearch;

      let visibleCount = 0;

      searchIndex.forEach((item) => {
        const typeMatch = currentFilter === "all" || item.type === currentFilter;
        const searchableText = `${item.title} ${item.description} ${item.tags}`.toLowerCase();
        const searchMatch = q === "" || searchableText.includes(q);

        const show = typeMatch && searchMatch;
        item.element.style.display = show ? "" : "none";
        if (show) visibleCount++;
      });

      // Badge count = count of visible items (after filter + search)
      resultCount.textContent = visibleCount;
      if (q !== "") searchResultBadge.classList.remove("hidden");
      else searchResultBadge.classList.add("hidden");
    }

    function performSearchDropdown() {
      if (currentSearch === "") {
        searchDropdown.classList.add("hidden");
        return;
      }

      const results = searchIndex.filter((item) => {
        const typeMatch = currentFilter === "all" || item.type === currentFilter;
        const searchableText = `${item.title} ${item.description} ${item.tags}`.toLowerCase();
        return typeMatch && searchableText.includes(currentSearch);
      });

      if (results.length === 0) {
        searchResults.innerHTML = `
          <div class="px-6 py-8 text-center">
            <svg class="w-12 h-12 text-flcGold/40 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <p class="text-flcCharcoal/60 text-sm">No results found for "<span class="font-semibold text-flcNavy">${currentSearch}</span>"</p>
          </div>
        `;
        searchDropdown.classList.remove("hidden");
        return;
      }

      searchResults.innerHTML = results.slice(0, 8).map((item) => {
        const highlightedTitle = highlightText(item.title, currentSearch);
        const desc = (item.description || "").trim();
        const shortDesc = desc.length > 110 ? desc.slice(0, 110) + "..." : desc;
        const highlightedDesc = highlightText(shortDesc, currentSearch);
        const typeLabel = (item.type || "resource").toUpperCase();

        return `
          <a href="${item.link}" class="search-result-item">
            <div class="flex items-start gap-3">
              <div class="flex-shrink-0 w-8 h-8 rounded-lg bg-flcGold/10 flex items-center justify-center mt-0.5">
                <svg class="w-4 h-4 text-flcGold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2 mb-1">
                  <span class="text-xs font-semibold uppercase text-flcGold tracking-wider">${typeLabel}</span>
                </div>
                <h4 class="text-sm font-semibold text-flcNavy mb-1 line-clamp-1">${highlightedTitle}</h4>
                <p class="text-xs text-flcCharcoal/60 line-clamp-2">${highlightedDesc}</p>
              </div>
              <svg class="w-5 h-5 text-flcGold/40 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>
          </a>
        `;
      }).join("");

      if (results.length > 8) {
        searchResults.innerHTML += `
          <div class="px-6 py-3 bg-flcGold/5 text-center border-t border-flcGold/10">
            <p class="text-xs text-flcCharcoal/60">Showing 8 of ${results.length} results</p>
          </div>
        `;
      }

      searchDropdown.classList.remove("hidden");
    }

    function clearSearchAction() {
      searchInput.value = "";
      currentSearch = "";
      clearSearchBtn.classList.add("hidden");
      searchResultBadge.classList.add("hidden");
      searchDropdown.classList.add("hidden");
      searchInput.classList.remove("border-flcGold");
      applyVisibility();
      searchInput.focus();
    }

    if (searchInput) {
      searchInput.addEventListener("input", (e) => {
        currentSearch = e.target.value.toLowerCase().trim();
        clearSearchBtn.classList.toggle("hidden", currentSearch === "");

        if (currentSearch !== "") {
          searchIcon.classList.add("hidden");
          searchSpinner.classList.remove("hidden");
          searchInput.classList.add("border-flcGold");
        } else {
          searchIcon.classList.remove("hidden");
          searchSpinner.classList.add("hidden");
          searchInput.classList.remove("border-flcGold");
          searchDropdown.classList.add("hidden");
        }

        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
          searchSpinner.classList.add("hidden");
          searchIcon.classList.remove("hidden");
          applyVisibility();
          performSearchDropdown();
        }, 300);
      });

      clearSearchBtn.addEventListener("click", clearSearchAction);

      searchInput.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          e.preventDefault();
          clearSearchAction();
        }
      });

      document.addEventListener("keydown", (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === "k") {
          e.preventDefault();
          searchInput.focus();
          searchInput.select();
        }
      });

      document.addEventListener("click", (e) => {
        if (!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) {
          searchDropdown.classList.add("hidden");
        }
      });
    }

    filterBtns.forEach((btn) => {
      btn.addEventListener("click", () => {
        filterBtns.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        currentFilter = btn.getAttribute("data-filter") || "all";

        applyVisibility();
        performSearchDropdown();
      });
    });

    window.addEventListener("DOMContentLoaded", () => {
      // initial counts and visibility
      resultCount.textContent = resourceCards.length;
      applyVisibility();
    });

    /* =========================
       Defensive download check
    ========================== */
    document.querySelectorAll('a[download]').forEach((link) => {
      link.addEventListener("click", async (e) => {
        const pdfUrl = link.getAttribute("href");
        if (!pdfUrl) return;

        try {
          const response = await fetch(pdfUrl, { method: "HEAD" });
          if (!response.ok) {
            e.preventDefault();
            showToast("Sorry, this resource is temporarily unavailable.", "error");
            console.error(`PDF not found: ${pdfUrl}`);
          }
        } catch (error) {
          console.warn("Unable to verify PDF availability:", error);
          // allow browser to handle it
        }
      });
    });
  </script>
</body>
</html>
